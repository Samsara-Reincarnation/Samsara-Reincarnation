Actor Goldeneye_UnarmedToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_PP7Token : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_KnifeToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_KF7Token : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_AutoShotgunToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_AR33Token : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_RocketLauncherToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_RCP90Token : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_LaserToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_GoldenGunToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_SniperToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_D5KToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 Inventory.InterHubAmount 0 }
Actor Goldeneye_PP7DualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_ThrowingKnivesDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_KF7DualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_AutoShotgunDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_AR33DualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_RocketLauncherDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_RCP90DualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_LaserDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_GoldenGunDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_SniperDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor Goldeneye_D5KDualToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }

Actor BondClass : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
Actor BondMusicToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 52 }
Actor BondGunAngle : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 10 }
Actor BondFiringToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchQueue : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchUIInit : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchAnimation : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchTabSwitch : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchUIDeinit : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWatchActivate : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondZoomToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondZoomAmount : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 20 }
Actor BondZoomAmountModifyTerminate : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondAltToggle : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 2 }
Actor BondPitchTokens : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 32768 }
Actor BondAngleTokens : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 131072 }
Actor BondWeaponToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 18 }
Actor BondWeaponSwitchToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 18 }
Actor BondAltActivationToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondDualWieldToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondDualWieldSpamProtector : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondHoldingToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondAlternateFire : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondFireDelay : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 3 }
Actor BondDryFireSpamProtector1 : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondDryFireSpamProtector2 : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondDualReloadSpamProtector : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondRocketLifeTime : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 11 }
Actor BondInstantSwitch : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondTimedMineTimer : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 210 }
Actor BondWatchDetonatorToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondPrimaryToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondSecondaryToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 1 }
Actor BondWeapons : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 12 }
Actor BondDualiesToken : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 10 }

Actor Goldeneye_BulletTracer : FastProjectile
{
	Projectile
	Speed 64
	Damage (0)
	Height 4
	Radius 2
	Renderstyle Add
	Alpha 0.5
	Decal "Goldeneye_BulletChip"
	var int user_damage;
	DamageType "GEBullet"
	ExplosionDamage 0
	+NOEXTREMEDEATH
	+HITTRACER
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	States
	{
		Spawn:
			GE00 A 0
			GE00 A 1 Bright
			loop
		Death:
			TNT1 A 0 A_Playsound("Goldeneye/Ricochet", CHAN_5)
			TNT1 AAAAAAAA 0 A_SpawnItemEx("Goldeneye_Debris", Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-360, 360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletImpact", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 3
			Stop
		XDeath:
			TNT1 A 0 A_Explode(CallACS("BondHitBox",user_damage),8,!XF_HURTSOURCE,0,8)
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletImpact_Smokeless", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 0 A_ReArrangePointers(AAPTR_TRACER,AAPTR_NULL,AAPTR_NULL)
			TNT1 A 0 A_SpawnItemEx("Switchable_FlyingBlood_NonViolent",0,0,0,random(-350,350)/100.00,random(-350,350)/100.00,random(500,1000)/100.00,random(-180,180),33)
			TNT1 A 3
			Stop
		Crash:
			TNT1 A 0 A_Playsound("Goldeneye/Ricochet", CHAN_5)
			TNT1 AAAAAAAA 0 A_SpawnItemEx("Goldeneye_Debris", Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-1, 1), Random(-360, 360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletImpact_Smokeless", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 3
			Stop
	}
}

Actor Goldeneye_BulletImpact
{
	+NOBLOCKMAP
	+NOGRAVITY
	Height 4
	Radius 2
	Scale 0.25
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4")
			Goto Spawn1
		Spawn1:
			GE00 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn2:
			GE01 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn3:
			GE02 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn4:
			GE03 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
	}
}

Actor Goldeneye_BulletImpact_Smokeless : Goldeneye_BulletImpact
{
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4")
			Goto Spawn1
		Spawn1:
			GE00 ABCDE 2 Bright
			stop
		Spawn2:
			GE01 ABCDE 2 Bright
			stop
		Spawn3:
			GE02 ABCDE 2 Bright
			stop
		Spawn4:
			GE03 ABCDE 2 Bright
			stop
	}
}

Actor Goldeneye_BulletImpact_Moonraker
{
	+NOBLOCKMAP
	+NOGRAVITY
	+NOCLIP
	+NOINTERACTION
	Height 4
	Radius 2
	Scale 0.25
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4")
			Goto Spawn1
		Spawn1:
			GE00 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn2:
			GE01 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn3:
			GE02 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
		Spawn4:
			GE03 ABCDE 2 Bright
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			TNT1 A 10
			TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletSmoke", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
			stop
	}
}

Actor Goldeneye_Cartridge_Standard
{
    Speed 2
    Mass 8
    Radius 2
    Height 2
	+MISSILE
    +CLIENTSIDEONLY
    +THRUACTORS
	+DROPOFF
	+NOTELEPORT
	+FLOORCLIP
	-SOLID
    States
    {
    Spawn:
		GE00 A 1
        loop
    Death:
		GE00 A 0 A_JumpIf(waterlevel != 0,"Done")
		GE00 A 0 A_PlaySound("Goldeneye/Casing",CHAN_BODY)
		GE00 A 0 ThrustThingZ(0,4,0,0)
		goto Done
	Done:
		GE00 A 500
		GE00 A 1 A_FadeOut
		Goto Done+1
    }
}

Actor Goldeneye_Cartridge_Rifle : Goldeneye_Cartridge_Standard {}
Actor Goldeneye_Cartridge_Shell : Goldeneye_Cartridge_Standard {}

actor Goldeneye_BulletSmoke
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.16
  RenderStyle Translucent
  Alpha 0
  +NOBLOCKMAP
  States
  {
   Spawn:
   GE08 A 0
   GE08 A 0 ACS_NamedExecuteAlways("BondSpriteEffects", 0, 1)
   GE08 A 0 A_ChangeVelocity(0, 0, 0.2, CVF_REPLACE)
   GE08 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4")
   Goto Spawn1
   Spawn1:
   GE08 A 4
   Loop
   Spawn2:
   GE08 B 4
   Loop
   Spawn3:
   GE08 C 4
   Loop
   Spawn4:
   GE08 D 4
   Loop
  }
}

ACTOR Goldeneye_TimeFreezer : PowerupGiver
{
   	Inventory.MaxAmount 0
	Powerup.Duration -0x7FFFFFFD
	Powerup.Type TimeFreezer
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
    States
    {
		Spawn:
			TNT1 A 2
			Loop
    }
}

Actor Goldeneye_WatchTabSwitch
{
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NOTIMEFREEZE
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Goldeneye/WatchBeep", CHAN_NOPAUSE|CHAN_5, 0.5, false)
		stop
	}
}

Actor Goldeneye_WatchOpen
{
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NOTIMEFREEZE
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Goldeneye/WatchOpen", CHAN_NOPAUSE|CHAN_5, 0.5, false)
		stop
	}
}

Actor Goldeneye_WatchClose
{
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NOTIMEFREEZE
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Goldeneye/WatchClose", CHAN_NOPAUSE|CHAN_5, 0.5, false)
		stop
	}
}

ACTOR Goldeneye_ExplosionZThrust : CustomInventory
{
	-COUNTITEM
	+INVENTORY.ALWAYSPICKUP
	Inventory.PickupMessage ""
	Inventory.PickupSound ""
	States
	{
		Spawn:
			TNT1 A 0 
			TNT1 A 1
			Stop
		Pickup:
			TNT1 A 0 
			TNT1 A 0 A_JumpIf(health <= 20, "Thrust")
			TNT1 A 1
			stop
		Thrust:
			TNT1 A 1 ThrustThingZ(0,2000/mass,0,1)
			Stop
	}
}