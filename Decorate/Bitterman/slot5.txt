Actor Q2RocketLauncher : Q2Weapon
{
	Tag "Rocket Launcher"
	Inventory.PickupMessage "Rocket Launcher"
	Weapon.AmmoGive 5
	Weapon.AmmoType RocketAmmo
	Weapon.AmmoUse 1
	Weapon.SlotNumber 5
	Inventory.RestrictedTo "Bitterman"		
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,5)
		RCK0 ABCDE 4
		Goto Ready+1
	Deselect:
		RCK0 N 2
		RCK1 WXYZ 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(32,2)
		RCK0 N 1 A_WeaponReady
		Loop
		RCK0 "OPQRSTUVWXYZ[^]" 5 A_WeaponReady
		RCK1 ABCDEFGHIJKLMNOPQRSTUV 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("DMModeOn", 1, "DMFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_AlertMonsters
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready
	SilentFire:
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON,0.25,0,3)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0,0.25,0,3)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_AlertMonsters
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket_Coop",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready
	SilentCoopFire:
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON,0.25,0,3)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket_Coop",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0,0.25,0,3)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready
	DMFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentDMFire")
		TNT1 A 0 A_AlertMonsters
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket_DM",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready
	SilentDMFire:
		RCK0 N 2 A_PlaySound("Q2Weapons/RocketLauncherFire",CHAN_WEAPON,0.25,0,3)
		RCK0 F 0 A_FireCustomMissile("Q2Rocket_DM",0,1,4,3)
		RCK0 F 3 A_GunFlash
		RCK0 G 3
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketLauncherLoad",0,0.25,0,3)
		RCK0 HIJ 3
		RCK0 KLMN 5
		Goto Ready		
	Flash:
		TNT1 A 0 A_SetPitch(Pitch-5.0)
		TNT1 A 1 A_Light2
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		TNT1 A 0 A_Light1
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		Goto LightDone
	}
}
Actor Q2Rocket : Rocket
{
	Speed 20
	Damage (150)
	-ROCKETTRAIL +BRIGHT
	DeathSound "Q2Weapons/RocketExplosion"
	DamageType "BittermanDamage"
	Decal Scorch
	States
	{
	Spawn:
		MIS1 AAAAA 0 A_SpawnItemEx(Q2GrenadeSmoke,Random2(5),0,Random2(5),0,0,FRandom(0.1,0.5),Random(1,360),0,128)
		MIS1 A 0 A_SpawnItemEx(Q2RocketTrail,0,0,0,FRandom(0,0.5),0,FRandom(-0.5,0),Random(1,360),128)
		MIS1 A 1 Light(Q2ROCKET) A_PlaySound("Q2Weapons/RocketFly",CHAN_VOICE,0.66,1)
		Loop
	Death:
		TNT1 A 0 A_Explode(150,120)
		TNT1 A 5 A_SpawnItem(Q2Explosion)
		Stop
	}
}
Actor Q2Rocket_DM : Q2Rocket { Speed 24 Damage (0) }
Actor Q2Rocket_Coop : Q2Rocket { Species "Player" +THRUSPECIES +DONTHARMSPECIES +MTHRUSPECIES +DONTHARMCLASS }
Actor Q2RocketTrail : Q2GrenadeSmoke { Translation "80:111=160:167" }