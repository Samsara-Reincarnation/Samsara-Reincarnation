ACTOR FlameWall : Weapon 
{
	 Weapon.SlotNumber 7
     Weapon.UpSound "gen/wepswitch"
     Weapon.SelectionOrder 750
     Inventory.PickupSound "gen/bpicku"
     Inventory.Pickupmessage "You filched a Flamewall!"
     Weapon.AmmoType "FWMissiles"
     Weapon.AmmoGive 5
     Weapon.AmmoUse 1
     +NOAUTOAIM 
	 +IGNORESKILL
     Obituary "%o is nice and crispy, thanks to %k."
	 Inventory.RestrictedTo "IPFreeley"	 
	 Tag "Flamewall"	 
     States 
     { 
     Spawn: 
        PFWL A -1 
        Stop 
     Ready:
		TNT1 A 0 A_TakeInventory("UsingFirearm", 1)
        FIRW A 1 A_WeaponReady 
        Goto Ready+1
     Deselect: 
        FIRW A 1 A_Lower 
        Loop
     Select:
        FIRW A 1 A_Raise
        Loop
     Fire:
        FIRW A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlayWeaponSound("FireWall/Shoot")
        FIRW B 1 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)		
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "Coopfire")
		TNT1 A 0 A_FireCustomMissile("Fwall",0,1,0,-8)
	 Continue:
        FIRW C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW F 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW A 28 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        FIRW A 0 a_refire
        Goto Ready+1
	 Coopfire:
		TNT1 A 0 A_FireCustomMissile("CoopFwall",0,1,0,-8)
		Goto Continue
     } 
}

ACTOR Fwaller
{
	 PROJECTILE
//  +RANDOMIZE
	+FLOORHUGGER
	-DONTRIP
	+STEPMISSILE
	+NOBLOOD
	+BLOODLESSIMPACT
     Scale 0.6
     MaxStepHeight 88
	 MaxDropOffHeight 124 	 
     Damage 0
	 damagetype "RottFire"
	 Obituary "%o is nice and crispy, thanks to %k."
     speed 28
	 Height 4
	 Radius 2
     States
     {
     Spawn:
		  TNT1 A 0
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 0, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 32, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -32, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 64, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -64, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 96, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -96, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 128, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -128, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 160, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -160, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, 192, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("Fwalling", 0, -192, 0, 6, 0)
		  stop
     Death:		  
     Crash:
		  TNT1 A 1
		  stop
     }
}

Actor CoopFwaller : Fwaller
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES	
     States
     {
     Spawn:
		  TNT1 A 0
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 0, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 32, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -32, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 64, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -64, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 96, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -96, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 128, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -128, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 160, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -160, 0, 6, 0)
          TNT1 A 2
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, 192, 0, 6, 0)
          TNT1 A 0 Bright A_CustomMissile("CoopFwalling", 0, -192, 0, 6, 0)
		  stop
     }
}
  
actor Fwall
{
    Radius 11
    Height 6
    Speed 30
    Damage (50) //MEEP
    Mass 5000
	Decal Scorch
    SCALE 0.50
    PROJECTILE
	+NOBLOOD
	+BLOODLESSIMPACT
    +FOILINVUL
    damagetype "RottExplosive"
    DeathSound "god/bang"	
	Obituary "%o is nice and crispy, thanks to %k."
    States
    {
    Spawn:
        FMIS A 4 Bright    
        FMIS A 2 Bright A_Gravity
		Loop
	DEATH:
		TNT1 A 0
		FMIS A 1 A_JumpIf(z - floorz > 0,"ExplosionOnly")
		Goto SpawnWall
	SpawnWall:
		TNT1 A 0 A_StopSound(CHAN_VOICE)
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		TNT1 A 0 A_PlaySound("FireWall/Burn")		
		TNT1 A 5 A_CustomMissile("FWaller", 0, 0, 0, 6)		
		Stop
	ExplosionOnly:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)		
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(50,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright		
		Stop	
	CRASH:	
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)		
		TNT1 A 0		
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(50,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
		Stop	
	XDEATH:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(50,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
		Stop
    }
}

Actor CoopFwall : Fwall
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES	
    Damage (140)	
	States
	{
	DEATH:
		TNT1 A 0
		FMIS A 1 A_JumpIf(z - floorz > 0,"ExplosionOnly")
		Goto SpawnWall
	SpawnWall:	
		TNT1 A 0 A_StopSound(CHAN_VOICE)	
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity	
		TNT1 A 0 A_PlaySound("FireWall/Burn")		
		TNT1 A 5 A_CustomMissile("CoopFWaller", 0, 0, 0, 6)		
		Stop
	ExplosionOnly:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)		
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(96,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright		
		Stop		
	CRASH:	
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)		
		TNT1 A 0		
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(96,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
		Stop	
	XDEATH:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
	    TNT1 A 0 A_Stop
        TNT1 A 0 A_NoGravity
		EXPL A 2 Bright A_Explode(96,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
		Stop		
	}	
}

ACTOR Fwalling
{
     PROJECTILE
	 -DROPOFF
	 +NODROPOFF
	 +NOBLOOD
	 +BLOODLESSIMPACT
     +NOEXPLODEFLOOR
	 +FLOORHUGGER
	 +PUFFGETSOWNER
	 -THRUGHOST
	 -MOVEWITHSECTOR
	 +STEPMISSILE
	 +CANPASS
	 +NODAMAGETHRUST
	 +PAINLESS	
	 +THRUACTORS
     Scale 0.6
     MaxStepHeight 88
	 MaxDropOffHeight 124 	 
     Damage (250)
	 Radius 5
	 Height 12
     speed 28
     damagetype "RottFire"
	 Obituary "%o is nice and crispy, thanks to %k."
     RenderStyle Add
     Alpha 0.95
     DeathSound "god/bang"
     States
     {
     Spawn:
		FWAL A 0
		FWAL A 0 Bright A_JumpIf(CallACS("Samsara_ProjectilePredictor",2)==1,1)
        FWAL AAAA 1 Bright ACS_NamedExecuteAlways("Samsara_ProjectilePredictor",0,2,0,0)
        FWAL BBCCDDEEFFGGHHIIJJKKLLMM 1 Bright ACS_NamedExecuteAlways("Samsara_ProjectilePredictor",0,2,0,0)
        loop
     Death:  
        BOMB ABCDEFGHIJKLMNOPQRST 2 Bright
        stop
     }
}

Actor Fwalling_Explosion
{
	Projectile
	Height 10
	Radius 5
	Speed 0
	Obituary "%o is nice and crispy, thanks to %k."
	damagetype "RottFire"
	+NOINTERACTION
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Explode(20,5,!XF_HURTSOURCE,0,5)
			TNT1 A 1
			Stop
	}
}

Actor CoopFwalling : Fwalling {	Species "Player" +THRUSPECIES +DONTHARMCLASS +DONTHARMSPECIES +MTHRUSPECIES }