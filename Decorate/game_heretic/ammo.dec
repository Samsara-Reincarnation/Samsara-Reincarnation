actor HereticAmmo1Small : Ammo1Small replaces BlasterAmmo
{
    Inventory.PickupSound "ammogem/bulletsmall"
	+FLOATBOB
	States
	{
	 Spawn:
		AMSM G 20
		AMSM G 20 BRIGHT
		Loop
	}
}

actor HereticAmmo1Big : Ammo1Big replaces BlasterHefty
{
    Inventory.PickupSound "ammogem/bulletbig"
	+FLOATBOB
	States
	{
	  Spawn:
		AMMB F 20
		AMMB F 20 BRIGHT
		Loop
	}
}

actor HereticAmmo2Small : Ammo2Small replaces CrossbowAmmo
{
    Inventory.PickupSound "ammogem/shellsmall"
	+FLOATBOB
	States
	{
	  Spawn:
		AMSM H 20
		AMSM H 20 BRIGHT
		Loop
	}
} 

actor HereticAmmo2Big : Ammo2Big replaces CrossbowHefty 
{
    Inventory.PickupSound "ammogem/shellbig"
	+FLOATBOB
	States
	{
	  Spawn:
		AMMB G 20
		AMMB G 20 BRIGHT
		Loop
	}	
}

actor HereticAmmo3Small : Ammo3Small replaces PhoenixRodAmmo 
{
    Inventory.PickupSound "ammogem/rocketsmall"
	+FLOATBOB
	States
	{
	  Spawn:
		AMSM I 20
		AMSM I 20 BRIGHT
		Loop
	}	
}

actor HereticAmmo3Big : Ammo3Big replaces PhoenixRodHefty 
{
    Inventory.PickupSound "ammogem/rocketbig"
	+FLOATBOB
	States
	{
	  Spawn:
		AMMB H 20
		AMMB H 20 BRIGHT
		Loop
		}
}

actor HereticAmmo4Small : Ammo4Small replaces SkullRodAmmo 
{
    Inventory.PickupSound "ammogem/plasmasmall"
	+FLOATBOB
	States
	{
	  Spawn:
		 AMSM J 20
		 AMSM J 20 BRIGHT
		 Loop
	}	  
}

actor HereticAmmo4Big : Ammo4Big replaces SkullRodHefty 
{
    Inventory.PickupSound "ammogem/plasmabig"
	+FLOATBOB
	States
	{
       Spawn:
		 AMMB I 20
		 AMMB I 20 BRIGHT
		 Loop
	}	 
}

actor HereticAmmoBackpack : AmmoBackpack replaces BagOfHolding {
    States {
      Spawn:
        AMPK B 20
        AMPK B 20 BRIGHT
        loop
	}
}

actor HereticStuffDump: HealPack0 replaces GoldWandHefty
{
    Scale 0.3
    Inventory.Amount 4
    Inventory.PickupMessage "$SAMSARA_HEALPACK_HERETIC"
    States
    {
      Spawn:
        MEDI V -1 BRIGHT
        stop
        
      Pickup:
        TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate", 22), "Infinite")
        TNT1 A 0 A_GiveInventory("FiniteHealth200", 4)
        stop

      Infinite:
        TNT1 A 0 A_GiveInventory("InfiniteHealth", 4)
        stop
    }
}

actor HereticAmmoDump : RandomSpawner replaces MaceAmmo
{
    DropItem HereticAmmo1Small
    DropItem HereticAmmo2Small
    DropItem HereticAmmo3Small
    DropItem HereticAmmo4Small
}

actor HereticAmmoDump2 : RandomSpawner replaces MaceHefty
{
    DropItem HereticAmmo1Big
    DropItem HereticAmmo2Big
    DropItem HereticAmmo3Big
    DropItem HereticAmmo4Big
}

actor HereticHealPack0 : HealPack0 replaces GoldWandAmmo { }

actor HereticHealPack1 : HealPack1 replaces CrystalVial { }

actor HereticHealPack2 : HealPack2 replaces ArtiHealth { }

actor HereticSuperHealth : SuperHealth replaces ArtiSuperHealth { }//Inventory.PickupAnnouncerEntry "" }

actor HereticArmorDump : ArmorScrap replaces ArtiTimeBomb
{
    Scale 0.55
    Armor.Saveamount 5
    Inventory.Pickupmessage "$SAMSARA_ARMORSCRAP_HERETIC"
    States
    {
      Spawn:
        BON3 A -1 bright
        stop
    }
}

actor HereticGreenArmorPickup : GreenArmorPickup replaces SilverShield
{
    States
    {
      Armor1:
      Armor1_WithYellow:
        TNT1 A 0 A_SpawnItemEx("HereticGreenArmorNoDrop",0,0,0,0,0,0,0,SXF_TRANSFERSPECIAL)
        stop

      Armor1_Drop:
      Armor1_YellowDrop:
        TNT1 A 0 A_SpawnItemEx("HereticArmorPack1",0,0,0,0,0,0,0,SXF_TRANSFERSPECIAL)
        stop
    }
}

actor HereticArmorPack1 : ArmorPack1
{
    Armor.Savepercent 50
    Armor.Saveamount 100
}

actor HereticGreenArmorNoDrop : HereticArmorPack1
{
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 A_ChangeFlag("DROPPED", 0)
        goto Super::Spawn
    }
}

actor HereticBlueArmorPickup : BlueArmorPickup replaces EnchantedShield
{
    States
    {
      Armor1:
      Armor1_WithYellow:
        TNT1 A 0 A_SpawnItemEx("HereticBlueArmorNoDrop",0,0,0,0,0,0,0,SXF_TRANSFERSPECIAL)
        stop

      Armor1_Drop:
      Armor1_YellowDrop:
        TNT1 A 0 A_SpawnItemEx("HereticArmorPack2",0,0,0,0,0,0,0,SXF_TRANSFERSPECIAL)
        stop
    }
}

actor HereticArmorPack2 : ArmorPack2
{
    Armor.Savepercent 75
    Armor.Saveamount 200
}

actor HereticBlueArmorNoDrop : HereticArmorPack2
{
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 A_ChangeFlag("DROPPED", 0)
        goto Super::Spawn
    }
}

// Dropped ammo replacement!
actor GoldWandAmmo2 : CustomInventory
{
    Inventory.PickupMessage "$SAMSARA_CLIPDROP_HERETIC_1"
    Inventory.PickupSound "ammo/bulletsmall"
    States
    {
      Spawn:
        AMG1 A -1 
        Stop
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
	    TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")	  		
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	  	
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Clip",3)
        stop
	  PickupRott:
		TNT1 A 0 A_JumpIfInventory("HSMissiles", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("HSMissiles", 2)
		Stop
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Zappers", Random(0,2))
		Stop		
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("Clip",3)
        stop
      PickupFail:
        AMG1 A 1
        fail		
    }
}

actor BlasterAmmo2 : CustomInventory
{
    Inventory.PickupMessage "$SAMSARA_CLIPDROP_HERETIC_2"
    Inventory.PickupSound "ammo/bulletsmall"
    States
    {
      Spawn:
        AMB1 ABC 4
        Loop
      Pickup:
	    TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")	  	  
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop
	  PickupRott:
		TNT1 A 0 A_JumpIfInventory("HSMissiles", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("HSMissiles", 10)
	    Stop
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers", 0, 1)
	    TNT1 A 0 A_GiveInventory("Catacomb_Zappers", Random(1,3))
		TNT1 A 0 A_JumpIfInventory("Catacomb_Waves", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Waves", Random(0,2))		
		Stop			
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop
      PickupFail:
        AMB1 A 1
        fail		
    }
}

actor CrossbowAmmo2 : CustomInventory//Shell
{
    //Inventory.Amount 10
    Inventory.PickupMessage "$SAMSARA_SHELLDROP_HERETIC_1"
    Inventory.PickupSound "ammo/shellsmall"
    States
    {
      Spawn:
        AMC1 A -1 
        Stop
      Pickup:
		TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")	  
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupWolfen")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupWolfen")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfen")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 		
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Shell",5)
        stop
      PickupRott:
	    TNT1 A 0 A_JumpIfInventory("RottMissiles", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("RottMissiles", 5)
	    Stop
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators", 0, 1)
	    TNT1 A 0 A_GiveInventory("Catacomb_XTerminators", Random(2,4))
		TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Bursts", Random(0,3))		
		Stop			
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("Shell",5)
        stop
      PickupWolfen:
		TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,3)
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Shell",5)
        stop		
      PickupFail:
        AMSM B 1
        fail		
    }
}

actor CrossbowAmmo3 : CustomInventory//Shell
{
    //Inventory.Amount 20
    Inventory.PickupMessage "$SAMSARA_SHELLDROP_HERETIC_2"
    Inventory.PickupSound "ammo/shellsmall"
    States
    {
      Spawn:
        AMC1 A -1 
        Stop
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupWolfen")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupWolfen")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfen")
		TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")	
  		TNT1 A 0 A_JumpIfInventory("StrifeClass", 0, "PickupStrife")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop
      PickupRott:
	    TNT1 A 0 A_JumpIfInventory("RottMissiles", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("RottMissiles", 10)
	    Stop	
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop
	  PickupStrife:
		TNT1 A 0 A_JumpIfInventory("Shell", 0, "PickupStrife2")
		TNT1 A 0 A_GiveInventory("Shell", 10)
		TNT1 A 0 A_GiveInventory("StrifePoisonAmmo", 5)
		Stop
	  PickupStrife2:
		TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("StrifePoisonAmmo", 5)
		Stop		
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators", 0, 1)
	    TNT1 A 0 A_GiveInventory("Catacomb_XTerminators", Random(4,8))
		TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Bursts", Random(0,6))		
		Stop			
      PickupWolfen:
		TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,3)
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop		
      PickupFail:
        AMSM B 1
        fail		
    }
}

actor PhoenixRodAmmo2 : CustomInventory
{
    Inventory.PickupMessage "$SAMSARA_ROCKETDROP_HERETIC_1"
    Inventory.PickupSound "ammo/rocketsmall"
    States
    {
      Spawn:
        AMP1 ABC 4
        Loop
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen")
  		TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")		
        TNT1 A 0 A_JumpIfInventory("CalebClass", 0, "PickupBlood")	
		TNT1 A 0 A_JumpIfInventory("StrifeClass", 0, "PickupStrife")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        stop
      PickupRott:
		TNT1 A 0 A_JumpIfInventory("FBMissiles", 0, "Pickupfail")
		TNT1 A 0 A_GiveInventory("FBMissiles", 1)
		Stop
	  PickupBlood:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo", 0, 2)
		TNT1 A 0 A_GiveInventory("RocketAmmo", 5)	
		TNT1 A 0 A_JumpIfInventory("SprayCanAmmo", 0, "PickupFail")
        TNT1 A 0 A_GiveInventory("SprayCanAmmo", 24)
        stop	
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        stop
	  PickupStrife:
		TNT1 A 0 A_JumpIfInventory("RocketAmmo", 0, "PickupStrife2")
		TNT1 A 0 A_GiveInventory("RocketAmmo", 5)
		TNT1 A 0 A_GiveInventory("WhitePhosGrenade", 2)
		Stop	
	  PickupStrife2:
		TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("WhitePhosGrenade", 2)
		Stop		
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Nukes", Random(3,5))
		Stop			
      PickupHexen:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Cell",5)
        stop
      PickupFail:
        AMP1 A 1
        fail		
    }
}

actor PhoenixRodAmmo3 : CustomInventory
{
    Inventory.PickupMessage "$SAMSARA_ROCKETDROP_HERETIC_2"
    Inventory.PickupSound "ammo/rocketsmall"
    States
    {
      Spawn:
        AMP1 ABC 4
        Loop
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen")
  		TNT1 A 0 A_JumpIfInventory("RottClass", 0, "PickupRott")		
        TNT1 A 0 A_JumpIfInventory("CalebClass", 0, "PickupBlood")
		TNT1 A 0 A_JumpIfInventory("StrifeClass", 0, "PickupStrife")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 		
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        stop
      PickupRott:
		TNT1 A 0 A_JumpIfInventory("FBMissiles", 0, "Pickupfail")
		TNT1 A 0 A_GiveInventory("FBMissiles", 4)
		Stop
	  PickupBlood:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo", 0, 2)
		TNT1 A 0 A_GiveInventory("RocketAmmo", 10)	
		TNT1 A 0 A_JumpIfInventory("SprayCanAmmo", 0, "PickupFail")
        TNT1 A 0 A_GiveInventory("SprayCanAmmo", 48)
        stop
	  PickupStrife:
		TNT1 A 0 A_JumpIfInventory("RocketAmmo", 0, "PickupStrife2")
		TNT1 A 0 A_GiveInventory("RocketAmmo", 10)
		TNT1 A 0 A_GiveInventory("WhitePhosGrenade", 2)
		Stop	
	  PickupStrife2:
		TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("WhitePhosGrenade", 2)
		Stop		
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        stop
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Nukes", Random(6,10))
		Stop			
      PickupHexen:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop
      PickupFail:
        AMP1 A 1
        fail		
    }
}

actor SkullRodAmmo2 : CustomInventory
{
    Inventory.PickupMessage "$SAMSARA_CELLDROP_HERETIC"
    Inventory.PickupSound "ammo/plasmasmall"
    States
    {
      Spawn:
        AMS1 AB 5
        Loop
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupRott")				
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
		TNT1 A 0 A_JumpIfInventory("QuakeClass", 1, "PickupQuake")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 0, "PickupCatacomb")	 		
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop
	  PickupRott:
	    TNT1 A 0 A_JumpIfInventory("DMissiles", 0, "Check1")
		TNT1 A 0 A_JumpIfInventory("FWMissiles", 0, "Check2")
      RottSafe:
		TNT1 A 0 A_GiveInventory("DMissiles", 5)
		TNT1 A 0 A_GiveInventory("FWMissiles", 1)
	    Stop
	  Check1:
		TNT1 A 0 A_JumpIfInventory("FWMissiles", 0, "PickupFail")
		Goto RottSafe
	  Check2:
		TNT1 A 0 A_JumpIfInventory("DMissiles", 0, "PickupFail")
	    Goto RottSafe
	  PickupQuake:
		TNT1 A 0 A_JumpIfInventory("Cell", 0, "PickupRanger2")
		TNT1 A 0 A_GiveInventory("Cell", 20)
		TNT1 A 0 A_GiveInventory("PlasmaCell", 1)
		Stop
	  PickupRanger2:
		TNT1 A 0 A_JumpIfInventory("PlasmaCell", 0, "PickupFail")
		TNT1 A 0 A_GiveInventory("PlasmaCell", 1)
		Stop		
	  PickupCatacomb:
		TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts", 0, "PickupFail")
	    TNT1 A 0 A_GiveInventory("Catacomb_Bolts", Random(1,4))
		Stop			
      PickupMarathon:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        TNT1 A 0 A_SetBlend("Green",0.4,4)
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop
      PickupFail:
        AMS1 A 1
        fail		
    }
}