actor "Heavy Assault Weapon": InstantSwitchWeapon
{
    Weapon.SelectionOrder 750
    Weapon.SlotNumber 3
	Weapon.BobStyle Alpha
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 1.5	
    Inventory.PickUpSound "wolfen/knifeget"
    Obituary "%k throttled volatile energy through %o with the Heavy Assault Weapon."
    Inventory.PickupMessage "You got a Heavy Assault Rifle!"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 10
	Weapon.AmmoType "Shell"
    +INVENTORY.UNDROPPABLE
    Weapon.YAdjust 9
	Inventory.RestrictedTo "BlakeStone"		
    States
    {
      Spawn:
        BWP3 A -1
        Loop

      Ready:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, 2)
        SRF5 A 1 A_WeaponReady
        loop
		BRIF F 1 A_WeaponReady
		Loop

      Fire:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "FireAOG")
        SRF5 B 3
	  Hold:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "HoldAOG")
        TNT1 A 0 A_PlayWeaponSound("Bpistol2/Fire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		SRF5 C 3 BRIGHT A_FireBullets(3.2, 3.2, 3, 7, "BlankPuffBlake")
		SRF5 DE 2 
		SRF5 A 2 A_Refire
        Goto Ready
		
	  FireAOG:
        BRIF G 3
	 HoldAOG:	
        TNT1 A 0 A_PlayWeaponSound("Bpistol2/Fire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFireAOG")
		BRIF H 3 BRIGHT A_FireBullets(3.2, 3.2, 3, 7, "BlankPuffBlake")
		BRIF IJ 2 
		BRIF F 2 A_Refire("HoldAOG")
        Goto Ready	  

      CoopFire:
		SRF5 CCC 0 BRIGHT A_FireCustomMissile("BlakeBullet2",frandom(-3.20,3.20),0,0,1,0,frandom(-3.20,3.20))
		SRF5 C 2 BRIGHT A_FireCustomMissile("BlankPuffBlake")
		SRF5 DE 2 
		SRF5 A 2 A_Refire
        Goto Ready
		
	  CoopFireAOG:
		BRIF HHH 0 BRIGHT A_FireCustomMissile("BlakeBullet2",frandom(-3.20,3.20),0,0,1,0,frandom(-3.20,3.20))
		BRIF H 2 BRIGHT A_FireCustomMissile("BlankPuffBlake")
		BRIF IJ 2 
		BRIF F 2 A_Refire
        Goto Ready		
    }
}

actor BlakeBullet2: FastProjectile
{
    Damage (7*Random(1,3))
    Radius 1
    Height 1
    Speed 300
    Projectile
    DamageType "BlakeBullet"
    +BLOODSPLATTER
    +NOTIMEFREEZE
	-EXTREMEDEATH
	+NOEXTREMEDEATH
	+THRUGHOST
    Alpha 1.0
    States
    {
      Spawn:
        TNT1 A 1
        loop

      Death:
        TNT1 A 1
        stop
    }
}
