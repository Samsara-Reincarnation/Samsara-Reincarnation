actor "Rapid Assault Weapon": InstantSwitchWeapon
{
    Weapon.SelectionOrder 800
    Weapon.SlotNumber 4
	Weapon.BobStyle Alpha
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 1.5	
    Inventory.PickUpSound "wolfen/knifeget"
    Obituary "%k punched holes in %o with the Rapid Assault Weapon."
    Inventory.PickupMessage "You got a Rapid Assault Rifle!"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 25
	Weapon.AmmoType "Clip"
    +INVENTORY.UNDROPPABLE
    Weapon.YAdjust 12
	Inventory.RestrictedTo "BlakeStone"
    Tag "Rapid Assault Weapon"
    States
    {
      Spawn:
        BWP4 A -1
        Loop

      Ready:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, 2)
        BRIF A 1 A_WeaponReady
        loop
		SRF5 F 1 A_WeaponReady
		Loop

      Fire:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "FireAOG")
        BRIF B 2
	  Hold:	
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "HoldAOG")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopHold")	  
        TNT1 A 0 A_PlayWeaponSound("BRifle/Fire")
		BRIF C 3 BRIGHT A_FireBullets(1.8,1.8, 1, 7, "BlankPuffBlake")
        //BRIF C 2 BRIGHT A_FireBullets(2.8,2.8,1,7,"BlankPuffBlake")
        BRIF D 2
		BRIF A 3 A_Refire 
        Goto Ready
		
	  FireAOG:
        SRF5 G 2
	  HoldAOG:	
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopHoldAOG")	  
        TNT1 A 0 A_PlayWeaponSound("BRifle/Fire")
		SRF5 H 3 BRIGHT A_FireBullets(1.8,1.8, 1, 7, "BlankPuffBlake")
        //BRIF C 2 BRIGHT A_FireBullets(2.8,2.8,1,7,"BlankPuffBlake")
        SRF5 I 2
		SRF5 J 3 A_Refire("HoldAOG")
        Goto Ready	  

      CoopHold:
        TNT1 A 0 A_PlayWeaponSound("BRifle/Fire")
        BRIF C 3 BRIGHT A_FireBullets(1.8,1.8, 1, 7, "BlankPuffBlakeCoop")
        BRIF D 2
        BRIF A 3 A_Refire
		Goto Ready
		
	  CoopHoldAOG:
        TNT1 A 0 A_PlayWeaponSound("BRifle/Fire")
		SRF5 H 3 BRIGHT A_FireBullets(1.8,1.8, 1, 7, "BlankPuffBlakeCoop")
        //BRIF C 2 BRIGHT A_FireBullets(2.8,2.8,1,7,"BlankPuffBlake")
        SRF5 I 2
		SRF5 J 3 A_Refire 
        Goto Ready	 
    }
}