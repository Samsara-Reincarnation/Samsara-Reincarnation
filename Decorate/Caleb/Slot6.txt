Actor TeslaCannon : Weapon
{
	inventory.pickupmessage "Picked up a Tesla Rifle"
    Inventory.PickupSound "Caleb/Weaponup"
	Obituary "%k \cusaw into\c- %o."
    weapon.selectionorder 20
    weapon.bobstyle Smooth
    weapon.bobrangeX 0.2
    weapon.bobrangeY 0.4
    weapon.bobspeed 0.5
	weapon.ammotype1 "Cell"
	weapon.ammotype2 "Cell"
	weapon.ammouse1 1
	weapon.ammouse2 1
	weapon.ammogive 40
	Weapon.SlotNumber 6
	Tag "Tesla Cannon"
    Inventory.RestrictedTo "Caleb"
	States
	{
	Spawn:
		TSPI A -1
		Stop
  	Ready:
	    TNT1 A 0 A_TakeInventory("UsingPitchfork", 1)
		TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboReady")
		TNT1 A 0 A_JumpIfInventory("CalebReady",1,"IntroTaunt")
		TNT1 A 0 A_JumpIfInventory("CalebWaiting",525,"WaitingTaunt")
    	TESR ABCDEF 2 A_WeaponReady
		Goto Ready+1
	Select:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboSelect")
	SelectLoop:	
		TNT1 AA 0 A_Raise
		TESR A 1 A_Raise
		Loop
	Deselect:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboDeselect")
	DeselectLoop:	
		TNT1 AA 0 A_lower
		TESR A 1 A_lower
		Loop
  	Fire:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboFire")	
	    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"Coopfire")		
		TEXX AB 2 A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL B 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL BC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL C 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL D 2 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL E 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL EF 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL F 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TNT1 A 0 BRIGHT A_Refire
		TESL G 2 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 BRIGHT A_FireCustomMissile("TeslaProjectile",0,1,5)
		TNT1 A 0 A_FireCustomMissile("TeslaSmoke",random(-8,8),0,1,7,0)
		TEXX BA 3 A_WeaponReady(14)
		Goto Ready
	CoopFire:
		TEXX AB 2 A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL B 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL BC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL C 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL D 2 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL E 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESL EF 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL F 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TNT1 A 0 BRIGHT A_Refire
		TESL G 2 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 BRIGHT A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TNT1 A 0 A_FireCustomMissile("TeslaSmoke",random(-8,8),0,1,7,0)
		TEXX BA 3 A_WeaponReady(14)
		Goto Ready
	Hold: // The Tesla Coil will stop if the player is not firing at this point
		TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboHold")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopHold")
		TESL G 2 BRIGHT A_WeaponReady(14)
		TESF A 0 BRIGHT A_GunFlash
		TESF A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL B 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF A 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESL BC 1 BRIGHT A_WeaponReady(14)
		TESF B 0 BRIGHT A_GunFlash
		TESF B 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL C 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF B 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESL D 2 BRIGHT A_WeaponReady(14)
		TESF D 0 BRIGHT A_GunFlash
		TESF D 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL E 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF D 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0,"Finish")
		TESL EF 1 BRIGHT A_WeaponReady(14)
		TESF E 0 BRIGHT A_GunFlash
		TESF E 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0,1,5)
		TESL F 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF E 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESF E 0 BRIGHT A_Refire
		Goto Finish
	CoopHold:
		TESL G 2 BRIGHT A_WeaponReady(14)
		TESF A 0 BRIGHT A_GunFlash
		TESF A 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL B 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF A 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESL BC 1 BRIGHT A_WeaponReady(14)
		TESF B 0 BRIGHT A_GunFlash
		TESF B 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL C 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF B 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESL D 2 BRIGHT A_WeaponReady(14)
		TESF D 0 BRIGHT A_GunFlash
		TESF D 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL E 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF D 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0,"Finish")
		TESL EF 1 BRIGHT A_WeaponReady(14)
		TESF E 0 BRIGHT A_GunFlash
		TESF E 0 BRIGHT A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0,1,5)
		TESL F 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_JumpIfNoAmmo("Finish")
		TESF E 0 BRIGHT A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "Finish")
		TESF E 0 BRIGHT A_Refire
		Goto Finish	
	Finish:
		TNT1 A 0 A_FireCustomMissile("TeslaSmoke",random(-8,8),0,1,7,0)
		TEXX BA 3 A_WeaponReady(14)
		TESF A 0 A_ClearRefire
		Goto Ready
	Flash:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboFlash")
		TNT1 A 1 A_Light (3)
		TNT1 A 3 A_Light1
		TNT1 A 1 A_Light0
		Stop
	AltFire:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboAltFire")
		TNT1 A 0 A_JumpIfInventory("Cell", 35, 1)
		Goto Ready
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopAltFire")		
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopAltFire")
		TESL A 0 A_PlayWeaponSound("Tesla/Charge") // 1.2 seconds (38 Tics)
		TES2 KL 3 A_WeaponReady(14) // 6 Tics
		TES2 MNABCDEFGHIJ 2 Bright A_WeaponReady(14) // 30 Tics
		TES2 EFGHIJ 1 BRIGHT A_WeaponReady(14) // 36 Tics
		TE2F A 0 BRIGHT A_PlayWeaponSound ("Tesla/Altfire")
		TE2F A 0 BRIGHT A_GunFlash
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBig",0,0,5)
		TNT1 A 0 A_TakeInventory("Cell", 35, TIF_NOTAKEINFINITE)		
		BTES L 2 BRIGHT A_WeaponReady(14)
		BTES MN 1 BRIGHT A_WeaponReady(14)
		TE2F D 1 A_WeaponReady(14)
		TESR ABCD 3 A_WeaponReady(14)
		Goto Ready	
	CoopAltFire:
		TESL A 0 A_PlayWeaponSound("Tesla/Charge") // 1.2 seconds (38 Tics)
		TES2 KL 3 A_WeaponReady(14) // 6 Tics
		TES2 MNABCDEFGHIJ 2 BRIGHT A_WeaponReady(14) // 30 Tics
		TES2 EFGHIJ 1 BRIGHT A_WeaponReady(14) // 36 Tics
		TE2F A 0 BRIGHT A_PlayWeaponSound ("Tesla/Altfire")
		TE2F A 0 BRIGHT A_GunFlash
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBigCoop",0,0,5)
		TNT1 A 0 A_TakeInventory("Cell", 35, TIF_NOTAKEINFINITE)		
		BTES L 2 BRIGHT A_WeaponReady(14)
		BTES MN 1 BRIGHT A_WeaponReady(14)
		TE2F D 1 A_WeaponReady(14)
		TESR ABCD 3 A_WeaponReady(14)
		Goto Ready
	AltFlash:
	    TNT1 A 0 A_JumpIfInventory("GunsAkimboP", 1, "AkimboAltFlash")	
		TE2F A 2 BRIGHT A_Light (5)
		TE2F BC 1 BRIGHT A_Light (3)
		TNT1 A 1 A_Light(0)	
		Stop		
	AkimboAltFire:
		TNT1 A 0 A_JumpIfInventory("Cell", 70, 1)
		Goto Ready
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"AkimboCoopAltFire")		
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"AkimboCoopAltFire")
		TAKM A 0 A_PlayWeaponSound("Tesla/AltCharge")
		TAKM C 3 A_WeaponReady(14)
		TESR GHIUJKLMVNWOPQRW 2 BRIGHT A_WeaponReady(14) 
		TESR VST 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_PlayWeaponSound ("Tesla/Altfire")
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBig",0,0,-5)		
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBig",0,0,5)
		TNT1 A 0 A_TakeInventory("Cell", 70, TIF_NOTAKEINFINITE)		
		BTES Q 2 BRIGHT A_WeaponReady(14)
		BTES R 1 BRIGHT A_WeaponReady(14)
		BTES S 1 A_WeaponReady(14)		
		TESR Z 1 BRIGHT A_WeaponReady(14)
		BTES O 1 A_WeaponReady(14)
		BTES P 3 A_WeaponReady(14)
		Goto Ready		
	AkimboCoopAltFire:		
		TAKM A 0 A_PlayWeaponSound("Tesla/AltCharge")
		TAKM C 3 A_WeaponReady(14)
		TESR GHIUJKLMVNWOPQRW 2 BRIGHT A_WeaponReady(14) 
		TESR VST 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 BRIGHT A_PlayWeaponSound ("Tesla/Altfire")
		TNT1 A 0 BRIGHT A_GunFlash
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBigCoop",0,0,-5)		
		TNT1 A 0 A_FireCustomMissile ("TeslaBallBigCoop",0,0,5)
		TNT1 A 0 A_TakeInventory("Cell", 70, TIF_NOTAKEINFINITE)		
		BTES Q 2 BRIGHT A_WeaponReady(14)
		BTES R 1 BRIGHT A_WeaponReady(14)
		BTES S 1 A_WeaponReady(14)		
		TESR Z 1 BRIGHT A_WeaponReady(14)
		BTES O 1 A_WeaponReady(14)
		BTES P 3 A_WeaponReady(14)
		Goto Ready
	AkimboAltFlash:		
		TESR X 2 BRIGHT A_Light(5)
		TESR Y 1 BRIGHT A_Light(3)
		TNT1 A 1 A_Light(0)		
		Stop			
	AkimboFlash:
		TNT1 A 2 BRIGHT A_Light(5)
		TNT1 A 1 BRIGHT A_Light(3)
		TNT1 A 1 A_Light(0)		
		Stop		
	AkimboReady:
	 	TNT1 A 0 A_JumpIfInventory("CalebReady",1,"IntroTaunt")
		TNT1 A 0 A_JumpIfInventory("CalebWaiting",525,"WaitingTaunt")
		TAKR ABCDEF 2 A_WeaponReady
		Goto Ready+1
	AkimboSelect:
		TNT1 AA 0 A_Raise	
		TAKR A 1 A_Raise
		Loop
	AkimboDeselect:
		TNT1 AA 0 A_Lower	
		TAKR A 1 A_Lower
		Loop
	AkimboFire:
	    TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "AkimboFireCoop")
		TAKM B 3 A_WeaponReady(14)
		TAKM C 2 A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_Refire
		Goto Ready
	AkimboHold:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "AkimboHoldCoop")
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectile",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")			
		TNT1 A 0 A_Refire
	AkimboFinish:
	    TNT1 AA 0 A_FireCustomMissile("TeslaSmoke",random(-16,16),0,1,12,0)	
		TAKM CB 3
		Goto Ready
	AkimboFireCoop:
		TAKM B 3 A_WeaponReady(14)
		TAKM C 2 A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_Refire
		Goto Ready
	AkimboHoldCoop:
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM FG 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM HC 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")
		TNT1 A 0 A_JumpIfInventory("Cell", 2, 1)
		Goto AkimboFinish			
		TAKM DE 1 BRIGHT A_WeaponReady(14)
		TNT1 A 0 A_GunFlash
		TNT1 AA 0 A_PlaySound("Tesla/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop", 0, 1, 20)
		TNT1 A 0 A_FireCustomMissile("TeslaProjectileCoop",0, 1, -20)
		TNT1 A 0 A_JumpIf (ACS_NamedExecuteWithResult("RoTT992")==0, "AkimboFinish")			
		TNT1 A 0 A_Refire
		Goto AkimboFinish
	IntroTaunt:
		TNT1 A 0 A_JumpIfInventory("CalebBallgag",1,2)
		TNT1 A 0 A_PlaySoundEx("Caleb/Enter", "SoundSlot7", 0, 0)
		TNT1 A 0 A_TakeInventory("CalebReady", 1)
		TNT1 A 0 A_GiveInventory("CalebTauntCooldown",5)
		TNT1 A 0 ACS_NamedExecuteAlways("CalebTauntCooldown", 0)
		Goto Ready
	WaitingTaunt:
		TNT1 A 0 A_JumpIfInventory("CalebBallgag",1,2)
		TNT1 A 0 A_PlaySoundEx("Caleb/Bored", "SoundSlot7", 0, 0)
		TNT1 A 0 A_TakeInventory("CalebWaiting", 525)
		TNT1 A 0 A_GiveInventory("CalebTauntCooldown",5)
		TNT1 A 0 ACS_NamedExecuteAlways("CalebTauntCooldown", 0)
		Goto Ready			
	}
}

Actor TeslaProjectile : FastProjectile
{
	Speed 72
	Radius 8
	Height 8
	PROJECTILE
	Damage (15+Random(0,10))
	Scale 0.85
	DamageType "Tesla"
	Obituary "%o was overcharged by %k."
	Renderstyle add
	+WINDTHRUST
	+FOILINVUL
	ActiveSound "Tesla/Elect"
	DeathSound "Tesla/Zap"
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_LoopActiveSound
			Goto SpawnLoop			
		SpawnLoop:	
			TESP AAAAAA 1 Bright A_SpawnItemEx("TeslaProjectileBall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			TNT1 AAAAAA 0 A_FadeIn(0.16)
			TESP AAAAAA 1 Bright A_SpawnItemEx("TeslaProjectileBall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			TNT1 AAAAAA 0 A_FadeIn(0.16)			
			TESP AAAAAA 1 Bright A_SpawnItemEx("TeslaProjectileBall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)			
			Loop
		Death:
			TNT1 AAAAA 1 A_SpawnItemEx("TeslaFX", random(-8,8), random(-8,8), random(0,3), random(-12,12), random(-12,12), random(0,3),SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			Stop
	}
}

Actor TeslaProjectileBall
{

  Radius 1
  Height 1
  Speed 0
  RenderStyle Normal
  +NOGRAVITY
  -SOLID
  +RANDOMIZE
  +CLIENTSIDEONLY  
  Scale 0.80
  States
  {
  Spawn:
	TNT1 A 0
	BTES F 1 Bright
    stop
  }
}

Actor TeslaProjectileCoop : TeslaProjectile { Species "Player" +THRUSPECIES }
Actor StopFiring : Inventory { inventory.amount 1 inventory.maxamount 1 }
Actor TeslaCounterX : Inventory { inventory.amount 1 inventory.maxamount 24 +IGNORESKILL }

Actor TeslaSmoke
{
	Height 1
	Radius 1
	PROJECTILE
	Damage 0
	Speed 1
	+RIPPER
	+BLOODLESSIMPACT
	+CLIENTSIDEONLY
	Alpha 0.9
	Renderstyle add
	Scale 0.065
	States
	{
		Spawn:
			DS95 FFGGHH 3 A_Fadeout(0.15)
			Stop
	}
}

Actor TeslaFX
{
	Height 1
	Radius 1
	RenderStyle Add
	+NOINTERACTION
	-SOLID
	+CLIENTSIDEONLY
	Scale 0.55
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Jump(128, "Spawn2")
		SpawnNormal:
			TNT1 A 0 A_PlaySound("TeslFX", CHAN_BODY)
			TSFX ABCDEF 2 Bright A_FadeOut(0.1)
		Loop
		Spawn2:
			TNT1 A 0 A_PlaySound("TeslFX", CHAN_BODY)
			TSFX GHIJKL 2 Bright A_FadeOut(0.1)
		Loop
	}
}

ACTOR TeslaBallBig 
{
    Radius	14
	Yscale 0.35
 	XScale 1.75
    Height	16
    Speed	48
	Damage  (0)		
    PROJECTILE
	DamageType "Tesla"
	+DONTSPLASH
	+FORCERADIUSDMG
	+WINDTHRUST
	+FULLVOLACTIVE
	ActiveSound "Tesla/Air2"
	RenderStyle Add
	Alpha 0.9
    States
    {
	    Spawn:
			TSLP A 0
			TSLP A 0 A_LoopActiveSound
	        BTES A 1 A_SpawnItemEx("TeslaDebris",random(-5,5),random(-5,5),random(-5,5),random(-4,4),random(-4,4),random(-1,1),SXF_CLIENTSIDE)
	        TSLP A 0 A_SpawnItemEx("BlueFlareSmall",8)
			TNT1 A 0 A_SpawnDebris("TeslaSparkDebris")		
	        BTES B 1 A_SpawnItemEx("TeslaDebris",random(-5,5),random(-5,5),random(-5,5),random(-1,1),random(-1,1),random(-1,1),SXF_CLIENTSIDE)
	        TSLP A 0 A_SpawnItemEx("BlueFlareSmall",8)
	        BTES C 1 A_SpawnItemEx("TeslaDebris",random(-5,5),random(-3,3),random(-3,3),random(-1,1),random(-1,1),random(-1,1),SXF_CLIENTSIDE)
	        TSLP A 0 A_SpawnItemEx("BlueFlareSmall",8)
			BTES D 1 A_SpawnItemEx("TeslaDebris",random(-2,2),random(-2,2),random(-2,2),random(-1,1),random(-1,1),random(-1,1),SXF_CLIENTSIDE)
	        TSLP A 0 A_SpawnItemEx("BlueFlareSmall",8)
			TNT1 A 0 A_SpawnDebris("TeslaSparkDebris")				
	        Goto Spawn+2				
		Death:
		Crash:			
			BFIR BBBBBBBBBBB 0 A_SpawnItemEx("TeslaDebris",random(-15,15),random(-15,15),random(-15,15),random(-1,1),random(-3,3),random(0,1),SXF_CLIENTSIDE)
			TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnDebris("TeslaSparkDebris")
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, 64)
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, -64)
			TNT1 A 0 A_SpawnItemEx("TeslaWave",0,0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			TNT1 A 0 A_Explode(300,300)//random(12,22),164) /2op4u? /According to my blood gameplay, this had a lot of radius.
			TNT1 A 5 A_PlaySound("Tesla/Boom2")
		 	Stop
		XDeath:
			BFIR BBBBBBBBBBB 0 A_SpawnItemEx("TeslaDebris",random(-15,15),random(-15,15),random(-15,15),random(-1,1),random(-3,3),random(0,1),SXF_CLIENTSIDE)
			TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnDebris("TeslaSparkDebris")
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, 64)
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, -64)
			TNT1 A 0 A_Explode(300,300)
			TNT1 A 5 A_PlaySound("Tesla/Boom2")
			Stop
	}
}

Actor TeslaBallBigCoop : TeslaBallBig
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
    Damage (Random(200,350)+Random(Random(0,0),Random(0,100)))
	States {
		Death:
		Crash:			
			BFIR BBBBBBBBBBB 0 A_SpawnItemEx("TeslaDebris",random(-15,15),random(-15,15),random(-15,15),random(-1,1),random(-3,3),random(0,1),SXF_CLIENTSIDE)
			TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnDebris("TeslaSparkDebris")
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, 64)
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, -64)
			TNT1 A 0 A_SpawnItemEx("TeslaWave",0,0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			TNT1 A 0 A_Explode(random(152,186),random(254,321))//random(12,22),164) /2op4u? /According to my blood gameplay, this had a lot of radius.
			TNT1 A 5 A_PlaySound("Tesla/Boom2")
		 	Stop
		XDeath:
			BFIR BBBBBBBBBBB 0 A_SpawnItemEx("TeslaDebris",random(-15,15),random(-15,15),random(-15,15),random(-1,1),random(-3,3),random(0,1),SXF_CLIENTSIDE)
			TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnDebris("TeslaSparkDebris")
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, 64)
			TNT1 A 0 A_SpawnItemEx("TeslaExplosion", 0, -64)
			TNT1 A 0 A_Explode(random(152,186),random(254,321))
			TNT1 A 5 A_PlaySound("Tesla/Boom2")
			Stop
	}	
}

Actor TeslaExplosion
{
	Speed 0
	Damage 0
	DamageType "Shock"
	Projectile
	+RIPPER
	+BLOODLESSIMPACT
	+FORCERADIUSDMG
	States
	{
		Spawn:
			TNT1 A 1 A_Explode(random(22,38),84)
		Stop
	}
}

actor TeslaDebris : Napalmdebris
{
  health 10
  Scale 0.35
  +NOINTERACTION
  +FLOATBOB
  +NOGRAVITY
  +CLIENTSIDEONLY
  FloatSpeed 1
  Speed 2
  RENDERSTYLE Translucent
  alpha 0.75
  VSpeed 1
  states
  {
  Spawn:
  	ZAPR A 0 
	ZAPR A 0 A_Jump(128,"ZapB")
  Zap:
	ZAPR A 0 A_Jump(128,1,2,3,4,5,6)
    TSFX AABBCCCDDEEFFAAABBBCCCCDDDDEEEFFF 1 BRIGHT A_FadeOut(0.025)
    Loop
  ZapB:
	ZAPR A 0 A_Jump(128,1,2,3,4,5,6)
    TSFX GGGHHHIIIIJJJKKKKLLLGGHHIIIJJKKLL 1 BRIGHT A_FadeOut(0.025)
	Loop
  }
}

Actor TeslaWave
{
	+NOINTERACTION
	-SOLID
	+CLIENTSIDEONLY
	Scale 0.9
	states
	{
	Spawn:
		BTES GGGHHHIIIJJJ 1 bright
		BTES KKK 1 bright A_FadeOut
		Stop
	}
}	