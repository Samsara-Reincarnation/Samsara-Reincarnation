actor WolfExtraLife : Inventory//CustomInventory
{
    tag "Extra Life"
    Inventory.Icon WOLFLIFE
    Inventory.Amount 1
    Inventory.MaxAmount 9
    +INVBAR
    +HUBPOWER
    +UNDROPPABLE
    -INTERHUBSTRIP/*
    States
    {
      Use:
        TNT1 A 1 A_Print("You cannot use this here.")
        fail
    }*/
}

actor WolfLifeProtection : PowerProtection
{
    damagefactor "normal", 0.25
    damagefactor "Pistol", 0.25
    DamageFactor "DoomFist", 0.25
    damagefactor "ZorchPistol", 0.25
    damagefactor "Wraithverge", 0.25
    damagefactor "zorch", 0.25
    damagefactor "fire", 0.25
    damagefactor "ice", 0.25
    damagefactor "slime", 0.25
    damagefactor "bfg", 0.25
    damagefactor "bfgspray", 0.25
    damagefactor "disintegrate", 0.25
    damagefactor "electric", 0.25
    DamageFactor "BFG", 0.25
    DamageFactor "BFGSpray", 0.25
    DamageFactor "Poison", 0.25
    DamageFactor "PoisonCloud", 0.25
    DamageFactor "Mace", 0.25
    DamageFactor "DragonClaw", 0.25
    DamageFactor "WolfenFlamethrower", 0.25
    DamageFactor "DukeDamage", 0.25
    DamageFactor "DukeExplosive", 0.25
    DamageFactor "DukeSpectral", 0.25
    DamageFactor "MightyBoot", 0.25
    DamageFactor "DukeIce", 0.25
    DamageFactor "DukePistol", 0.25
    DamageFactor "MarathonPistol", 0.25
    DamageFactor "Explosive", 0.25
    DamageFactor "DoomPlasma", 0.25
    DamageFactor "CorvusCrossbow", 0.25
    DamageFactor "CorvusHellstaff", 0.25
    DamageFactor "CorvusHellstaffTomed", 0.25
    DamageFactor "MarathonPlasma", 0.25
    DamageFactor "BJSpear", 0.25
    DamageFactor "DoomCacodemon", 0.25
    DamageFactor "DoomHellNoble", 0.25
    DamageFactor "DoomSpiderPlasma", 0.25
    DamageFactor "DoomTheseGuysAreTheBest", 0.25
    DamageFactor "HereNitrogolem", 0.25
    DamageFactor "HereAxeGreen", 0.25
    DamageFactor "HereAxeRed", 0.25
    DamageFactor "Wizard", 0.25
    DamageFactor "HereLichWind", 0.25
    DamageFactor "HereDsparil", 0.25
    DamageFactor "HexBishop", 0.25
    DamageFactor "HexSlaughtaur", 0.25
    DamageFactor "HexGreenFire", 0.25
    DamageFactor "HexStalkerShot", 0.25
    DamageFactor "HexHeresiarchPurple", 0.25
    DamageFactor "QuakePistol", 0.25
    DamageFactor "NotQuadded", 0.25
    DamageFactor "SpectralNoQuad", 0.25
    DamageFactor "Kamikaze", 1.0
    DamageFactor "ZorchKamikaze", 1.0
    powerup.color Grey 0.1
}

actor Salvate : ArtiTeleport
{
    +INVENTORY.AUTOACTIVATE
    +INVENTORY.ALWAYSPICKUP
}

actor Totenkopf_Flamethrower : InstantSwitchWeapon
{
    Tag "FlammenWerfer"
	Weapon.SelectionOrder 400
    Weapon.SlotNumber 8
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 0
    Weapon.AmmoType "Totenkopf_FlamethrowerFuel"
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Inventory.PickupMessage "Flamethrower"
	Inventory.RestrictedTo "WolfenPlayer"		
    Obituary ""
    Weapon.YAdjust 16
    States
    {
      Spawn:
		TK06 F 4
        Loop

      Ready:
        TK06 A 1 A_WeaponReady
        loop

      Fire:
        TK06 B 2
		Goto Hold

      Hold:
		TK06 C 0 A_JumpIfInventory("CoopModeOn", 1, "CoopHold")
        TK06 C 0 A_PlaySound("Totenkopf/flamethrower",CHAN_WEAPON)
        TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
        TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
		TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
		TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
		TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
		TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_Projectile",0,1,0,8)
        TK06 D 2 Bright
		TK06 D 0 A_Refire
		TK06 E 3
        Goto Ready
	  CoopHold:
        TK06 C 0 A_PlaySound("Totenkopf/flamethrower",CHAN_WEAPON)
        TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
        TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
		TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
		TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
		TK06 C 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
		TK06 D 2 Bright A_FireCustomMissile("Totenkopf_Flamethrower_ProjectileCoop",0,1,0,8)
        TK06 D 2 Bright
		TK06 D 0 A_Refire
		TK06 E 3
        Goto Ready	  
    }
}

Actor Totenkopf_Flamethrower_Projectile
{
	Speed 16
	Damage (random(0,256)>>3)
	Height 16
	Radius 8
	Projectile
	DamageType "TotenkopfFire"
	+BLOODLESSIMPACT
	+NOEXTREMEDEATH
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TK52 ABABCDCD 3 Bright
		Death:
			TK52 A 0 A_Stop
			TK52 EFG 2 Bright
			Stop
	}
} 
Actor Totenkopf_Flamethrower_ProjectileCoop : Totenkopf_Flamethrower_Projectile { Species "Player" +THRUSPECIES }

Actor Totenkopf_FlameThrowerFuel : Ammo 
{
	Inventory.MaxAmount 200
	Ammo.BackPackMaxAmount 400
	Ammo.BackPackAmount 40
	Inventory.Icon "AMSMN0"
}	

actor Totenkopf_MG42 : InstantSwitchWeapon
{
	Tag "Portable MG42"
    Weapon.SelectionOrder 750
    Weapon.SlotNumber 9
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 0
    Weapon.AmmoType "Cell"
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Inventory.PickupMessage "MG42 Portable Machine Gun"
	Inventory.RestrictedTo "WolfenPlayer"	
    Obituary ""
    Weapon.YAdjust 16
    States
    {
      Spawn:
		TK11 F 4
        Loop

      Ready:
        TK11 A 1 A_WeaponReady
        loop

      Fire:
        TK11 B 2
		Goto Hold

      Hold:
		TK11 C 0 A_JumpIfInventory("DMModeON", 1, "DMHold")
		TK11 C 0 A_JumpIfInventory("CoopModeON", 1, "CoopHold")
        TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
        TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-4,4))
        TK11 D 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-4,4))
		TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
		TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-4,4))
        TK11 D 2 Bright
		TK11 D 0 A_Refire
        TK11 E 3
        Goto Ready
		
	  CoopHold:
        TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
        TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-4,4))
        TK11 D 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-4,4))
		TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
		TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-4,4))
        TK11 D 2 Bright
		TK11 D 0 A_Refire
        TK11 E 3
        Goto Ready	  
		
	  DMHold:
        TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
        TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42DM",random(-4,4))
        TK11 D 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42DM",random(-4,4))
		TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
		TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42DM",random(-4,4))
        TK11 D 2 Bright
		TK11 D 0 A_Refire
        TK11 E 3
        Goto Ready			
    }
} 

Actor Totenkopf_Tracer_MG42 : Totenkopf_Tracer { Damage (8 + (random(0,256)%28)) }
Actor Totenkopf_Tracer_MG42DM : Totenkopf_Tracer { Damage (10 + (random(0,256)%7)) }
Actor Totenkopf_Tracer_MG42Coop : Totenkopf_Tracer_MG42 { Species "Player" +THRUSPECIES }

actor Totenkopf_Sniper : InstantSwitchWeapon
{
	Tag "Kar98k Rifle (Scope)"
	Weapon.SlotPriority 2
	Weapon.AmmoGive 0
    Weapon.SelectionOrder 800
    Weapon.SlotNumber 2
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoType "Shell"
//	+WEAPON.NOAUTOFIRE
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Obituary ""
    Weapon.YAdjust 16
	Weapon.SlotPriority 3	
    Inventory.PickupMessage "Kar98k Sniper Rifle"
	Inventory.RestrictedTo "WolfenPlayer"	
	+WEAPON.NO_AUTO_SWITCH
    States
    {
      Spawn:
		TK12 M 4
        Loop

	  Deselect:
	    TNT1 A 0 A_ZoomFactor(1.0,ZOOM_INSTANT)
		Goto Super::Deselect

      Ready:
		TNT1 A 0 A_ZoomFactor(4.0,ZOOM_INSTANT)
		TNT1 A 0 A_JumpIf(CallACS("Totenkopf_SniperScope")==1,1)
        TNT1 A 1 A_WeaponReady
        loop

      Fire:
		TNT1 B 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
        TNT1 B 3
		TNT1 C 0 A_PlaySound("Totenkopf/atkkar98",CHAN_WEAPON)
		TNT1 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_Sniper")
		TNT1 D 5
		TNT1 E 0 A_JumpIfNoAmmo("Ready")
		TNT1 E 0 A_PlaySound("Totenkopf/kar98bolt",CHAN_5)
		TNT1 E 5
		TNT1 F 5
		TNT1 GHI 2
		TNT1 JK 5
		TNT1 L 3
		Goto Ready
	  CoopFire:
        TNT1 B 3
		TNT1 C 0 A_PlaySound("Totenkopf/atkkar98",CHAN_WEAPON)
		TNT1 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_SniperCoop")
		TNT1 D 5
		TNT1 E 0 A_JumpIfNoAmmo("Ready")
		TNT1 E 0 A_PlaySound("Totenkopf/kar98bolt",CHAN_5)
		TNT1 E 5
		TNT1 F 5
		TNT1 GHI 2
		TNT1 JK 5
		TNT1 L 3
		Goto Ready	  
    }
} 

Actor Totenkopf_Tracer_Sniper : Totenkopf_Tracer { Damage ((125+random(0,256)%25)) }
Actor Totenkopf_Tracer_SniperCoop : Totenkopf_Tracer_Sniper { Species "Player" +THRUSPECIES }

/*Actor Totenkopf_SniperPickup : CustomInventory
{
	Inventory.PickupMessage "Scoped Kar98k Rifle"
	Inventory.PickUpSound "Totenkopf/getweapon"
	+INVENTORY.AUTOACTIVATE
	States
	{
		Spawn:
			TK12 M 4
			Loop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("Shell",0,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Sniper",1,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Kar98K",1,"PickupFailure")
			TNT1 A 0 A_GiveInventory("Totenkopf_Sniper",1)
			TNT1 A 0 A_GiveInventory("Totenkopf_Kar98K",1)
			TNT1 A 0 A_GiveInventory("Shell",5)
			Stop
		PickupFailure:
			TNT1 A 0 A_Railwait
			fail
	}
}*/

Actor WolfStrifeUnique1 : CustomInventory
{
	-COUNTITEM
	+INVENTORY.ALWAYSPICKUP
	Inventory.PickupMessage ""
	Inventory.PickupSound ""
	States
	{
		Spawn:
			TNT1 A 0 
			TNT1 A 1
			Stop
		Pickup:
			TNT1 A 0 A_GiveInventory("Totenkopf_IHaveFlameThrower", 1)
			TNT1 A 0 A_GiveInventory("Samsara_ModeWeaponChange", 1)
			TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel", 40)
			TNT1 A 0 A_GiveInventory("WolfExtraLife",1)
			TNT1 A 1 A_Railwait
			Stop
	}
}

Actor WolfStrifeUnique2 : CustomInventory
{
	-COUNTITEM
	+INVENTORY.ALWAYSPICKUP
	Inventory.PickupMessage ""
	Inventory.PickupSound ""
	States
	{
		Spawn:
			TNT1 A 0 
			TNT1 A 1
			Stop
		Pickup:
			TNT1 A 0 A_GiveInventory("Totenkopf_IHaveMG42", 1)
			TNT1 A 0 A_GiveInventory("Samsara_ModeWeaponChange", 1)
			TNT1 A 0 A_GiveInventory("Cell", 80)
			TNT1 A 0 A_GiveInventory("WolfExtraLife",1)
			TNT1 A 1 A_Railwait
			Stop
	}
}

Actor WolfStrifeUnique3 : CustomInventory
{
	-COUNTITEM
	+INVENTORY.ALWAYSPICKUP
	Inventory.PickupMessage ""
	Inventory.PickupSound ""
	States
	{
		Spawn:
			TNT1 A 0 
			TNT1 A 1
			Stop
		Pickup:
			TNT1 A 0 A_GiveInventory("Shell",5)
			TNT1 A 0 A_GiveInventory("Totenkopf_IHaveScope", 1)
			TNT1 A 0 A_GiveInventory("Samsara_ModeWeaponChange", 1)
			TNT1 A 0 A_GiveInventory("WolfExtraLife",1)
			TNT1 A 1 A_Railwait
			Stop
	}
}