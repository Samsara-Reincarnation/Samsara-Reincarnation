Actor WhitePhosGrenade : Ammo
{
	Inventory.MaxAmount 10
	Ammo.BackPackAmount 0
	Ammo.BackPackMaxAmount 20
	Inventory.Icon "AMSML0"
}	

Actor StrifeGasGrenadeAmmo : Ammo
{
	Inventory.MaxAmount 10
	Ammo.BackPackAmount 0
	Ammo.BackPackMaxAmount 20
	Inventory.Icon "AMSML0"
}

actor " Grenade Launcher " : StrifeGrenadeLauncher
{
  Weapon.Kickback 100
  +INVENTORY.UNDROPPABLE
  Inventory.PickUpSound "strife/weaponget"
  Weapon.SelectionOrder 2400
  Weapon.AmmoUse1 0
  Weapon.AmmoUse2 0
  Weapon.AmmoGive1 16
  Weapon.AmmoGive2 0
  Weapon.AmmoType1 "RocketAmmo"
  Weapon.AmmoType2 "WhitePhosGrenade"
  Weapon.SlotNumber 5
  Weapon.SisterWeapon ""
  +NOALERT
  Inventory.PickupMessage "You picked up the Grenade Launcher."
  //Obituary "%k \ciinverted\c- %o \ciwith a H-E grenade."
  Inventory.RestrictedTo "StrifeguyPlayer"  
  States
  {
  Spawn:
    SGRL A -1
    Stop
  Ready:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",2,"ReadyGas")
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"ReadyPhos")
    GRN1 A 1 A_WeaponReady
    Loop
  Deselect:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",2,"DeselectGas")
    GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"DeselectPhos")
    GRN1 A 1 A_Lower
    Loop
  Select:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",2,"SelectGas")
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"SelectPhos")
    GRN1 A 1 A_Raise
    Loop
  Fire:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",2,"FireGas")
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"FirePhos")
    TNT1 A 0 A_JumpIfInventory("RocketAmmo", 1, "FireHE")
	Goto Ready
  FireHE:	
    TNT1 A 0 A_AlertMonsters
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"FirePhos")
    GRN1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
	//GRN1 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "SpreadFire")
	GRN1 A 0 A_TakeInventory("RocketAmmo", 1, TIF_NOTAKEINFINITE)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade", -90, "Flash")
    GRN1 B 10
	GRN1 B 0 A_JumpIfNoAmmo(3)
	GRN1 A 0 A_TakeInventory("RocketAmmo", 1,TIF_NOTAKEINFINITE)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade", 90, "Flash2")
    GRN1 C 10
    GRN1 A 0 A_ReFire
    Goto Ready
  AltFire:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",2,"AltFireGas")
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"AltFirePhos")
    GRN1 AAAAAAAAAAAA 1 A_Lower
    GRN1 A 0 A_GiveInventory("GrenadeMode",1)
	GRN2 AAAAAAAAAAAA 1 A_Raise
	Goto Ready
  AltFirePhos:
    GRN2 AAAAAAAAAAAA 1 A_Lower
    GRN2 A 0 A_GiveInventory("GrenadeMode",1)
	GRN3 AAAAAAAAAAAA 1 A_Raise
	Goto Ready
  AltFireGas:
    GRN3 AAAAAAAAAAAA 1 A_Lower
    GRN3 A 0 A_TakeInventory("GrenadeMode",2)
	GRN1 AAAAAAAAAAAA 1 A_Raise
	Goto Ready
  SpreadFire:
    GRN1 A 0 A_FireGrenade("StrifeHEGrenade", -0, "Flash")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade", -180, "Flash")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade", -90, "Flash")
    GRN1 B 10
	GRN1 B 0 A_JumpIfNoAmmo(7)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade", 0, "Flash2")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade", 180, "Flash2")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade", 90, "Flash2")
    GRN1 C 10
    GRN1 A 0 A_ReFire
	Goto Ready
  CoopFire:
	GRN1 A 0 A_JumpIfInventory("GrenadeMode",1,"CoopFirePhos")
    //GRN1 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "CoopSpreadFire")
	GRN1 A 0 A_TakeInventory("RocketAmmo", 1, TIF_NOTAKEINFINITE)
	GRN1 A 5 A_FireGrenade("StrifeHEGrenade2", -90, "Flash")
    GRN1 B 10
	GRN1 B 0 A_JumpIfNoAmmo(3)
    GRN1 A 0 A_TakeInventory("RocketAmmo", 1, TIF_NOTAKEINFINITE)
	GRN1 A 5 A_FireGrenade("StrifeHEGrenade2", 90, "Flash2")
    GRN1 C 10
    GRN1 A 0 A_ReFire
    Goto Ready
  CoopSpreadFire:
    GRN1 A 0 A_FireGrenade("StrifeHEGrenade2", 0, "Flash")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade2", -180, "Flash")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade", -90, "Flash")
    GRN1 B 10
	GRN1 B 0 A_JumpIfNoAmmo(7)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade2", 0, "Flash2")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN1 A 0 A_FireGrenade("StrifeHEGrenade2", 180, "Flash2")
	GRN1 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN1 A 5 A_FireGrenade("StrifeHEGrenade2", 90, "Flash2")
    GRN1 C 10
    GRN1 A 0 A_ReFire
	Goto Ready
  Flash:
    GRN1 D 5 Bright A_Light1
    Goto LightDone
  Flash2:
    GRN1 E 5 Bright A_Light2
    Goto LightDone
  ReadyPhos:
    GRN2 A 1 A_WeaponReady
    Loop
  DeselectPhos:
    GRN2 A 1 A_Lower
    Loop
  SelectPhos:
    GRN2 A 1 A_Raise
    Loop
  FirePhos:
	TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade", 1, 2)
	TNT1 A 0 A_Jump(255, "AltFirePhos")
    TNT1 A 0 A_AlertMonsters
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",9,8)
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFirePhos")	
//  GRN2 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFirePhos")
	GRN2 A 0 A_TakeInventory("WhitePhosGrenade",1,TIF_NOTAKEINFINITE)
	GRN2 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFirePhos")
	//GRN2 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "SpreadFirePhos")
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade", -90, "Flash3")
    GRN2 B 10
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",9,8)
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFirePhos")
//  GRN2 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFirePhos")
	GRN2 B 0 A_JumpIfInventory("WhitePhosGrenade", 1, 2)
	GRN2 B 0 A_Jump(255, "AltFirePhos")
	GRN2 B 0 A_TakeInventory("WhitePhosGrenade",1,TIF_NOTAKEINFINITE)
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade", 90, "Flash4")
    GRN2 C 10
    GRN2 A 0 A_ReFire
    Goto Ready
  SpreadFirePhos:
    GRN2 A 0 A_FireGrenade("StrifePhosGrenade", -0, "Flash3")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade", -180, "Flash3")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade", -90, "Flash3")
    GRN2 B 10
    GRN2 A 0 A_JumpIfInventory("RocketAmmo",9,8)
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFirePhos")
	GRN2 B 0 A_JumpIfNoAmmo(8)
	GRN2 B 0 A_TakeInventory("RocketAmmo",7)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade", 0, "Flash4")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade", 180, "Flash4")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade", 90, "Flash4")
    GRN2 C 10
    GRN2 A 0 A_ReFire
	Goto Ready
  CoopFirePhos:
    //GRN2 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "CoopSpreadFirePhos")
	GRN2 B 0 A_JumpIfInventory("WhitePhosGrenade", 1, 2)
	GRN2 B 0 A_Jump(255, "AltFirePhos")
	GRN2 A 5 A_FireGrenade("StrifePhosGrenade2", -90, "Flash3")
    GRN2 B 10
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",8,7)
//  GRN2 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFirePhos")
//	GRN2 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFirePhos")
	GRN2 B 0 A_JumpIfInventory("WhitePhosGrenade", 1, 2)
	GRN2 B 0 A_Jump(255, "AltFirePhos")
    GRN2 A 0 A_TakeInventory("WhitePhosGrenade",1,TIF_NOTAKEINFINITE)
	GRN2 A 5 A_FireGrenade("StrifePhosGrenade2", 90, "Flash4")
    GRN2 C 10
    GRN2 A 0 A_ReFire
    Goto Ready
  CoopSpreadFirePhos:
    GRN2 A 0 A_FireGrenade("StrifePhosGrenade2", -0, "Flash3")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade2", -180, "Flash3")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade2", -90, "Flash3")
    GRN2 B 10
    GRN2 A 0 A_JumpIfInventory("RocketAmmo",9,8)
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFirePhos")
	GRN2 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFirePhos")
	GRN2 B 0 A_JumpIfNoAmmo(8)
	GRN2 B 0 A_TakeInventory("WhitePhosGrenade",1)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade2", 0, "Flash4")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN2 A 0 A_FireGrenade("StrifePhosGrenade2", 180, "Flash4")
	GRN2 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN2 A 5 A_FireGrenade("StrifePhosGrenade2", 90, "Flash4")
    GRN2 C 10
    GRN2 A 0 A_ReFire
	Goto Ready
  Flash3:
    GRN2 D 5 Bright A_Light1
    Goto LightDone
  Flash4:
    GRN2 E 5 Bright A_Light2
    Goto LightDone
  ReadyGas:
    GRN3 A 1 A_WeaponReady
    Loop
  DeselectGas:
    GRN3 A 1 A_Lower
    Loop
  SelectGas:
    GRN3 A 1 A_Raise
    Loop
  FireGas:
	TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo", 1, 2)
	TNT1 A 0 A_Jump(255, "AltFireGas")
    TNT1 A 0 A_AlertMonsters
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",9,8)
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFireGas")	
//  GRN3 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFireGas")
	GRN3 A 0 A_TakeInventory("StrifeGasGrenadeAmmo",1,TIF_NOTAKEINFINITE)
	GRN3 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFireGas")
	//GRN3 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "SpreadFireGas")
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade", -90, "Flash5")
    GRN3 B 10
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",9,8)
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFireGas")
//  GRN3 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFireGas")
	GRN3 B 0 A_JumpIfInventory("StrifeGasGrenadeAmmo", 1, 2)
	GRN3 B 0 A_Jump(255, "AltFireGas")
	GRN3 B 0 A_TakeInventory("StrifeGasGrenadeAmmo",1,TIF_NOTAKEINFINITE)
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade", 90, "Flash6")
    GRN3 C 10
    GRN3 A 0 A_ReFire
    Goto Ready
  SpreadFireGas:
    GRN3 A 0 A_FireGrenade("StrifeGasGrenade", -0, "Flash5")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade", -180, "Flash5")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade", -90, "Flash5")
    GRN3 B 10
    GRN3 A 0 A_JumpIfInventory("RocketAmmo",9,8)
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFireGas")
	GRN3 B 0 A_JumpIfNoAmmo(8)
	GRN3 B 0 A_TakeInventory("RocketAmmo",7)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade", 0, "Flash6")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade", 180, "Flash6")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade", 90, "Flash6")
    GRN3 C 10
    GRN3 A 0 A_ReFire
	Goto Ready
  CoopFireGas:
    //GRN3 A 0 A_JumpIfInventory("SamsaraHasSpread", 0, "CoopSpreadFireGas")
	GRN3 B 0 A_JumpIfInventory("StrifeGasGrenadeAmmo", 1, 2)
	GRN3 B 0 A_Jump(255, "AltFireGas")
	GRN3 A 5 A_FireGrenade("StrifeGasGrenade2", -90, "Flash5")
    GRN3 B 10
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",8,7)
//  GRN3 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFireGas")
//	GRN3 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFireGas")
	GRN3 B 0 A_JumpIfInventory("StrifeGasGrenadeAmmo", 1, 2)
	GRN3 B 0 A_Jump(255, "AltFireGas")
    GRN3 A 0 A_TakeInventory("StrifeGasGrenadeAmmo",1,TIF_NOTAKEINFINITE)
	GRN3 A 5 A_FireGrenade("StrifeGasGrenade2", 90, "Flash6")
    GRN3 C 10
    GRN3 A 0 A_ReFire
    Goto Ready
  CoopSpreadFireGas:
    GRN3 A 0 A_FireGrenade("StrifeGasGrenade2", -0, "Flash5")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade2", -180, "Flash5")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade2", -90, "Flash5")
    GRN3 B 10
    GRN3 A 0 A_JumpIfInventory("RocketAmmo",9,8)
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",8,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",7,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",6,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",4,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",3,"AltFireGas")
	GRN3 A 0 A_JumpIfInventory("RocketAmmo",2,"AltFireGas")
	GRN3 B 0 A_JumpIfNoAmmo(8)
	GRN3 B 0 A_TakeInventory("StrifeGasGrenadeAmmo",1)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade2", 0, "Flash6")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
	GRN3 A 0 A_FireGrenade("StrifeGasGrenade2", 180, "Flash6")
	GRN3 A 0 A_GiveInventory("RocketAmmo", 1)
    GRN3 A 5 A_FireGrenade("StrifeGasGrenade2", 90, "Flash6")
    GRN3 C 10
    GRN3 A 0 A_ReFire
	Goto Ready
  Flash5:
    GRN3 D 5 Bright A_Light1
    Goto LightDone
  Flash6:
    GRN3 E 5 Bright A_Light2
    Goto LightDone
  }
}

actor StrifeHEGrenade
{
  Speed 15
  Radius 13
  Height 13
  Mass 20
  Damage (random(1,4)*1)
  ReactionTime 30
  Projectile
  -NOGRAVITY
  +BOUNCEONACTORS
  +EXPLODEONWATER
  +FORCEXYBILLBOARD  
  +WINDTHRUST
  +FORCERADIUSDMG  
  MaxStepHeight 4
  BounceType "Doom"
  BounceFactor 0.5
  BounceCount 2
  DamageType "StrifeExplosive"
  SeeSound "strife/grenadeshoot"
  DeathSound "strife/grenadebang"
  Obituary "%k \ciinverted\c- %o \ciwith a H-E grenade."
  
  States
  {
  Spawn:
    HEGR AB 3 A_Countdown
    Loop
  Death:
    SBNG A 0 Bright A_NoGravity
    SBNG A 0 Bright A_SetTranslucent(1, 1)
    SBNG A 2 Bright A_Explode(192, 192, 1, 1)
    SBNG BCDEFGHIJKLMN 3 Bright
    Stop
  }
}

actor StrifeHEGrenade2 : StrifeHEGrenade { +THRUSPECIES Species "Player" +DONTHARMCLASS +DONTHARMSPECIES +MTHRUSPECIES }
actor RebelHEGrenade_2 : StrifeHEGrenade2
{
	DamageType "RebelMissile"
	States
	{
	  Death:
		SBNG A 0 Bright A_NoGravity
		SBNG A 0 Bright A_SetTranslucent(1, 1)
		SBNG A 2 Bright A_Explode(80, 192, 1, 1)
		SBNG BCDEFGHIJKLMN 3 Bright
		Stop
  }
}
Actor RebelHEGrenade : StrifeHEGrenade
{
	States
	{
	  Death:
		SBNG A 0 Bright A_NoGravity
		SBNG A 0 Bright A_SetTranslucent(1, 1)
		SBNG A 2 Bright A_Explode(80, 192, 0, 1)
		SBNG BCDEFGHIJKLMN 3 Bright
		Stop
  }
}
actor StrifePhosGrenade
{
  Speed 15
  Radius 13
  Height 13
  Mass 20
  Damage (random(1,4)*1)
  ReactionTime 40
  Projectile
  +FRIENDLY
  -NOGRAVITY
  +BOUNCEONACTORS
  +EXPLODEONWATER
  +WINDTHRUST
  +FORCEXYBILLBOARD  
  BounceType "Doom"
  MaxStepHeight 4
  BounceFactor 0.5
  BounceCount 2
  DamageType "StrifeExplosive"
  SeeSound "strife/grenadeshoot"
  DeathSound "strife/grenadebang"
  Obituary "%k \cimade\c- %o \citake a flame bath."
  
  States
  {
  Spawn:
    PHGR AB 3 A_Countdown
    Loop
  Death:
    SBN2 A 2 A_CustomMissile("PhosFire",0,0,0,CMF_TRACKOWNER|CMF_AIMDIRECTION)
    Stop
  }
}

actor StrifePhosGrenade2 : StrifePhosGrenade 
{ 
  +THRUSPECIES
  Species "Player"
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES
  States
  {
  Death:
    SBN2 A 2 A_CustomMissile("CoopPhosFire",0,0,0,CMF_TRACKOWNER|CMF_AIMDIRECTION)
    Stop
  }
}

actor PhosFire : PhosphorousFire
{
  ReactionTime 17
  Radius 1
  Height 1
  Obituary "%k \cimade\c- %o \citake a flame bath."
  DamageType "Fire"
  +FORCERADIUSDMG
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +MOVEWITHSECTOR
  states
  {
  Spawn:
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
    SBN2 C 2 Bright A_Countdown
	SGFW A 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW A 2 Bright A_CustomMissile("PhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW A 2 Bright A_SpawnItemEx("PhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    SGFW B 2 Bright A_Countdown
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
    SGFW D 3 Bright A_Countdown
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
	SBN2 A 0 A_SetAngle(angle + random(15, 90))
	SBN2 A 0 A_Recoil(random(-6, 6))
    SGFW F 3 Bright A_Countdown
	SGFW G 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW G 3 Bright A_CustomMissile("PhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW G 3 Bright A_SpawnItemEx("PhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    Goto Spawn+5
  Death:
    SGFW H 2 Bright
	SGFW I 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW I 2 Bright A_CustomMissile("PhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW I 2 Bright A_SpawnItemEx("PhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    SGFW JK 2 Bright
    Stop
  }
}

actor PhosFire2 : PhosFire
{
  Obituary "%k \cimade\c- %o \citake a flame bath."
  DamageType "Fire"
  Speed 2
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +FORCERADIUSDMG
  +MOVEWITHSECTOR  
  states
  {
  Spawn:
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
    SBN2 C 2 Bright 
    SGFW A 2 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW B 2 Bright 
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
    SGFW D 3 Bright 
    SBN2 B 2 Bright A_Explode (20, 96)  //was 64
    SGFW F 3 Bright 
    SGFW G 3 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW A 0 A_Die
  Death:
    SGFW H 2 Bright
    SGFW I 2 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW JK 2 Bright
    Stop
  }
}

actor CoopPhosFire : PhosphorousFire
{
  ReactionTime 60
  Obituary "%o killed %hself."
  DamageType "PhosFireCoop"
  Species "Player"
  +FRIENDLY
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +THRUSPECIES
  +FORCERADIUSDMG
  +MOVEWITHSECTOR  
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES  
  states
  {
  Spawn:
    SBN2 B 2 Bright A_Explode (48, 96)  //was 64
    SBN2 C 2 Bright A_Countdown
	SGFW A 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW A 2 Bright A_CustomMissile("CoopPhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW A 2 Bright A_SpawnItemEx("CoopPhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    SGFW B 2 Bright A_Countdown
    SGFW C 2 Bright A_Explode (48, 96)  //was 48
    SGFW D 3 Bright A_Countdown
    SGFW E 3 Bright A_Explode (48, 96)  //was 64
	SBN2 A 0 A_SetAngle(angle + random(15, 90))
	SBN2 A 0 A_Recoil(random(-6, 6))
    SGFW F 3 Bright A_Countdown
	SGFW G 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW G 3 Bright A_CustomMissile("CoopPhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW G 3 Bright A_SpawnItemEx("CoopPhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    Goto Spawn+5
  Death:
    SGFW H 2 Bright
	SGFW I 0 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    //SGFW I 2 Bright A_CustomMissile("CoopPhosFire2", random(0,7), random(-7,7), random(-180, 180), CMF_TRACKOWNER|CMF_AIMDIRECTION)
	SGFW I 2 Bright A_SpawnItemEx("CoopPhosFire2", random(-7,7), random(-7,7), 0, random(-3,3), random(-3,3), 0, random(-180, 180))
    SGFW JK 2 Bright
    Stop
  }
}
actor CoopPhosFire2 : CoopPhosFire
{
  Obituary "%o killed %hself."
  DamageType "PhosFireCoop"
  Species "Player"
  +FRIENDLY
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +MOVEWITHSECTOR
  +FORCERADIUSDMG  
  +THRUSPECIES
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES
  states
  {
  Spawn:
    SBN2 B 2 Bright A_Explode (48, 96)  //was 48
    SBN2 C 2 Bright 
    SGFW A 2 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW B 2 Bright 
    SGFW C 2 Bright A_Explode (48, 96)  //was 64
    SGFW D 3 Bright 
    SGFW E 3 Bright A_Explode (48, 96)  //was 48
    SGFW F 3 Bright 
    SGFW G 3 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW A 0 A_Die
  Death:
    SGFW H 2 Bright
    SGFW I 2 Bright A_PlaySound("strife/largefire", CHAN_VOICE)
    SGFW JK 2 Bright
    Stop
  }
}

actor StrifeGasGrenade
{
  Speed 15
  Radius 13
  Height 13
  Mass 20
  Damage (random(1,4)*1)
  ReactionTime 40
  Projectile
  +FRIENDLY
  -NOGRAVITY
  +BOUNCEONACTORS
  +EXPLODEONWATER
  +WINDTHRUST
  +FORCEXYBILLBOARD  
  BounceType "Doom"
  MaxStepHeight 4
  BounceFactor 0.5
  BounceCount 2
  DamageType "StrifeExplosive"
  SeeSound "strife/grenadeshoot"
  DeathSound "strife/grenadebang"
  Obituary "%k \cimade\c- %o \citake an acid trip."
  
  States
  {
  Spawn:
    GASG AB 3 A_Countdown
    Loop
  Death:
    GASC AAAA 2 A_CustomMissile("StrifeGasCloud",0,0,0,CMF_TRACKOWNER|CMF_AIMDIRECTION)
    Stop
  }
}

actor StrifeGasGrenade2 : StrifeGasGrenade
{ 
  +THRUSPECIES
  Species "Player"
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES
  States
  {
  Death:
    GASC AAAA 2 A_CustomMissile("CoopStrifeGasCloud",0,0,0,CMF_TRACKOWNER|CMF_AIMDIRECTION)
    Stop
  }
}


actor StrifeGasCloud
{
  Obituary "%k \cimade\c- %o \citake an acid trip."
  DamageType "PoisonBolt"
  Renderstyle Translucent
  Speed 2
  Height 2
  Radius 1
  Projectile
  +THRUACTORS
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +FORCERADIUSDMG
  +NODAMAGETHRUST
  +MOVEWITHSECTOR  
  -NOGRAVITY
  states
  {
  Spawn:
	TNT1 A 0 NoDelay A_Die
  Death:
	GASC A 0
	GASC A 0 ThrustThing(random(0,256),8,0,0)
	GASC A 5
	GASC B 0 A_Stop
	GASC BCD 5
	GASC A 0 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
	GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
	GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC DCBA 5
    Stop
  }
}

Actor StrifePoisonProjectile : FastProjectile
{
	Projectile
	Speed 64
	Damage (0)
	Height 4
	Radius 2
	PoisonDamage 8, 8, 16
	DamageType "PoisonBolt"
	Obituary "%k \cimade\c- %o \citake an acid trip."
	+NOEXTREMEDEATH
	+NODAMAGETHRUST
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 1 
			Stop
		Crash:
		Death:
		XDeath:
			TNT1 A 1
			Stop
	}
}

Actor StrifePoisonProjectile_2 : StrifePoisonProjectile { Species "Player" +THRUSPECIES +MTHRUSPECIES }

Actor StrifeGasGreen : Trigger
{
	States
	{
		Pickup:
			TNT1 A 0 A_SetBlend("OliveDrab",0.25,105)
			Stop
	}
}

Actor BlankPuffPoison : BlankPuff { DamageType "PoisonBolt" PoisonDamage 8, 8, 16 +BLOODLESSIMPACT }

actor CoopStrifeGasCloud : StrifeGasCloud
{
  Obituary "%o killed %hself."
  DamageType "PhosFireCoop"
  Species "Player"
  +FRIENDLY
  -EXTREMEDEATH
  +NOEXTREMEDEATH
  +MOVEWITHSECTOR
  +FORCERADIUSDMG  
  +THRUSPECIES
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES
  states
  {
  Death:
	GASC A 0
	GASC A 0 ThrustThing(random(0,256),8,0,0)
	GASC A 5
	GASC B 0 A_Stop
	GASC BCD 5
	GASC A 0 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
	GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
	GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_PlaySound("strife/gascloud", CHAN_VOICE)
    GASC H 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
    GASC G 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC F 5 A_RadiusGive("StrifeGasGreen",128,RGF_PLAYERS,1)
	GASC E 5 A_Explode (16, 128)
	TNT1 AAAAAAAAAAA 0 A_CustomMissile("StrifePoisonProjectile_2", 32, 0, Random(0,359), CMF_AIMOFFSET|CMF_TRACKOWNER)
    GASC DCBA 5
    Stop
  }  
}

actor GrenadeMode : Inventory { -INVBAR +INVENTORY.UNDROPPABLE inventory.maxamount 2 }