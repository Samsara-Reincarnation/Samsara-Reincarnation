actor QuakeRegenTimer: Counter {}

actor "Thunderbolt": InstantSwitchWeapon
{
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.75
	Weapon.BobSpeed 1.4
	Weapon.BobStyle Alpha   
    Weapon.Kickback 100
    Weapon.SelectionOrder 1
    Weapon.AmmoUse 1
    Weapon.AmmoGive 60
    Weapon.AmmoType "Cell"
	Weapon.AmmoGive2 1
    Weapon.AmmoType2 "PlasmaCell"
    +NOALERT
    +NOAUTOAIM
	+AMMO_OPTIONAL
	+ALT_AMMO_OPTIONAL
    +UNDROPPABLE
    Inventory.Icon "QLTGZ0"
	Inventory.RestrictedTo "QuakePlayer"
    Inventory.PickupSound "quakeweps/weaponget"
    Inventory.PickupMessage "You got the thunderbolt"
    Obituary "$SAMSARA_RANGER_OB_SLOT7_1"

    States
    {
      Select:
        TNT1 A 0 A_GiveInventory("Ranger_PlasmaSelected", 1)
		TNT1 A 0 A_TakeInventory("Ranger_GunSelected", 1)
        TNT1 A 0 A_TakeInventory("Ranger_ExplosiveSelected", 1)
		TNT1 A 0 A_TakeInventory("Ranger_NailSelected", 1)
		TNT1 A 0 A_TakeInventory("Ranger_AxeSelected", 1)
		TNT1 A 0 A_GiveInventory("UsingLG")
        goto Super::Select

      Deselect:
        TNT1 A 0 A_TakeInventory("Ranger_PlasmaSelected", 1)
		TNT1 A 0 A_TakeInventory("UsingLG")
		TNT1 A 0 A_TakeInventory("UsingDOEAmmo")
		TNT1 A 0 A_TakeInventory("FiredPlasmaCell")
        TNT1 A 0 A_StopSound(6)
        TNT1 A 0 A_StopSound(7)
        goto Super::Deselect

      Ready:
        QLTG A 0 A_StopSound(6)
        TNT1 A 0 A_JumpIfInventory("FiredPlasmaCell",1,"PlasmaReady")
		QLTG A 1 A_WeaponReady
		TNT1 A 0 A_TakeInventory("FiredPlasmaCell",1)
        TNT1 A 0 A_TakeInventory("UsingDoEAmmo",1)
        Loop
		
	  PlasmaReady:
        PLS2 A 1 A_WeaponReady
        TNT1 A 0 A_GiveInventory("FiredPlasmaCell",1)
        TNT1 A 0 A_GiveInventory("UsingDoEAmmo",1)
        loop
      
	  Fire:
        TNT1 A 0 A_JumpIfInventory("FiredPlasmaCell",1,"PlasmaFire")
		TNT1 A 0 A_JumpIfNoAmmo("DeselectShit")
		TNT1 A 0 A_JumpIfInventory("QuadDamagePower", 1, "QuadSound")
        goto AfterSound

      QuadSound:
        TNT1 A 0 A_StopSound(7)
        TNT1 A 0 A_PlaySound("quakeweps/quadfire", 7, 1.0, 1)
        goto AfterSound

      AfterSound:
		TNT1 A 0 A_JumpIfInventory("QuakeInvisTimer", 1, 2)
        TNT1 A 0 A_AlertMonsters
        QLTG A 0 A_PlaySound("quakeweps/lightning", 6, 1.0, 1)
        QLTG A 0 A_PlaySound("quakeweps/lightningstart", CHAN_WEAPON)
        goto Hold

      Hold:
        TNT1 A 0 A_JumpIfNoAmmo("DeselectShit")
		QLTG A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",2,"Discharge")
        QLTG A 0 A_GunFlash
        TNT1 A 0 A_JumpIfInventory("QuadDamagePower", 1, 2)
        TNT1 A 0 A_StopSound(7)
        //TNT1 A 0 A_FireBullets(0, 0, 1, 30, "LGPuff", FBF_USEAMMO | FBF_NORANDOM, 512)

        QLTG A 0 A_JumpIfInventory("LGFrame", 3, "Fire3")
        QLTG A 0 A_JumpIfInventory("LGFrame", 2, "Fire2")
        QLTG A 0 A_JumpIfInventory("LGFrame", 1, "Fire1")
        goto Fire0

      Fire0:
        QLTG B 0 A_GiveInventory("LGFrame")
		QLTG B 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire0")
		QLTG B 2 A_FireCustomMissile("LGBeamProjectile", 0, 1)
        goto FireEnd

      CoopFire0:
	    QLTG B 2 A_FireCustomMissile("LGBeamProjectileCoop", 0, 1)
		goto FireEnd

      Fire1:
        QLTG C 0 A_GiveInventory("LGFrame")
		QLTG C 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire1")
		QLTG C 2 A_FireCustomMissile("LGBeamProjectile", 0, 1)
        goto FireEnd
		
	  CoopFire1:
	    QLTG C 2 A_FireCustomMissile("LGBeamProjectileCoop", 0, 1)
		goto FireEnd

      Fire2:
		QLTG D 0 A_GiveInventory("LGFrame")
		QLTG D 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire2")
		QLTG D 2 A_FireCustomMissile("LGBeamProjectile", 0, 1)
        goto FireEnd
		
	  CoopFire2:
	    QLTG D 2 A_FireCustomMissile("LGBeamProjectileCoop", 0, 1)
		goto FireEnd

      Fire3:
		QLTG E 0 A_TakeInventory("LGFrame")
		QLTG E 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire3")
		QLTG E 2 A_FireCustomMissile("LGBeamProjectile", 0, 1)
        goto FireEnd
		
	  CoopFire3:
	    QLTG E 2 A_FireCustomMissile("LGBeamProjectileCoop", 0, 1)
		goto FireEnd

      FireEnd:
        QLTG E 0 A_Refire
        QLTG E 0 A_TakeInventory("LGFrame")
        QLTG E 0 A_PlaySound("quakeweps/lightningstart", CHAN_WEAPON)
        QLTG E 0 A_StopSound(7)
        TNT1 A 0 A_JumpIfInventory("QuadDamagePower", 1, "QuadSound2")
        goto End2

      QuadSound2:
        TNT1 A 0 A_PlaySound("quakeweps/quadfire", 6)
        goto End2

      End2:
        QLTG F 2 A_WeaponReady
        QLTG GH 1 A_WeaponReady
        goto Ready

      AltFire:
        TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"Ready")
        TNT1 A 0 A_JumpIfInventory("FiredPlasmaCell",1,"Swap2")
        TNT1 A 0 A_PlaySound("quakeweps/doeammochange")
        TNT1 A 0 A_GiveInventory("FiredPlasmaCell",1)
        TNT1 A 0 A_GiveInventory("UsingDoEAmmo",1)
        PLS2 A 5 A_WeaponReady(12)
        TNT1 A 0 A_GiveInventory("FiredPlasmaCell",1)
        PLS2 A 10 A_WeaponReady(8)
        goto PlasmaReady
	  
	  Swap2:
        TNT1 A 0 A_PlaySound("quakeweps/doeammochange")
        TNT1 A 0 A_TakeInventory("FiredPlasmaCell",1)
        TNT1 A 0 A_TakeInventory("UsingDoEAmmo",1)
        QLTG A 5 A_WeaponReady(12)
        TNT1 A 0 A_TakeInventory("FiredPlasmaCell",1)
        QLTG A 10 A_WeaponReady(8)
        goto Ready   
        
      PlasmaFire:
		PLS2 A 0 A_JumpIfInventory("PlasmaCell",1,"PlasmaPreFire1")
		Goto Swap2
	  PlasmaPreFire1:
		PLS2 A 0 A_TakeInventory("PlasmaCell",1,TIF_NOTAKEINFINITE)
		PLS2 A 0 A_JumpIfInventory("QuadDamagePower",1,"PlasmaQuad")
		Goto PlasmaPreFire2
	  PlasmaQuad:
		PLS2 A 0 A_PlaySound("quakeweps/quadfire", 3)
		Goto PlasmaPreFire2
	  PlasmaPreFire2:
		PLS2 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",2,"Discharge")
        TNT1 A 0 A_JumpIfInventory("QuakeInvisTimer", 1, "PlasmaStandardFire")
        TNT1 A 0 A_AlertMonsters
	  PlasmaStandardFire:
		PLS2 A 0 A_PlaySound("Plasmacell/Fire")
		PLS2 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopPlasmaStandardFire")
		PLS2 A 3 Bright A_FireCustomMissile("PlasmaCellBall",0,0)//A_SpawnItemEX("PlasmaCellBall",cos(pitch)*32,0,40-(sin(pitch)*32),cos(pitch)*24,0,-sin(pitch)*24,0,SXF_SETMASTER|SXF_NOCHECKPOSITION,0,tid)
		PLS2 BCDA 3 Bright
		Goto PlasmaPostFire
	  PlasmaPostFire:
		PLS2 A 13
		PLS2 A 3 A_ReFire("PlasmaFire")
		Goto Ready
	  CoopPlasmaStandardFire:
		PLS2 A 3 Bright A_FireCustomMissile("PlasmaCellBall_Coop",0,0)//A_SpawnItemEX("PlasmaCellBall_Coop",cos(pitch)*32,0,40-(sin(pitch)*32),cos(pitch)*24,0,-sin(pitch)*24,0,SXF_SETMASTER|SXF_NOCHECKPOSITION,0,tid)
		PLS2 BCDA 3 Bright
		Goto PlasmaPostFire
		
	  Discharge:
        QLTG A 0 A_StopSound(6)
        QLTG A 0 A_StopSound(7)
        TNT1 A 0 A_JumpIfInventory("QuakeInvisTimer", 1, 2)
        TNT1 A 0 A_AlertMonsters
        QLTG A 0 A_PlaySound("quakeweps/lightningdischarge", 6, 1, 0, ATTN_NONE)
		TNT1 A 0 A_JumpIfInventory("UsingDoEAmmo",1,"Discharge2")
        QLTG A 1 A_FireCustomMissile("LGDischarge",0,0)
        goto Ready  // you're probably dead now

	  Discharge2:
	    PLS2 A 1 A_FireCustomMissile("LGPlasmaDischarge",0,0)
        goto Ready

      Flash:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraRecoil", 0, -66, 0, 3)
        TNT1 A 2 A_Light2
        TNT1 A 1 A_Light1
        goto LightDone

      Spawn:
        QLTG Z -1
        Stop
		
      DeselectShit:
		TNT1 A 0 A_TakeInventory("Ranger_PlasmaSelected", 1)
		TNT1 A 0 A_TakeInventory("UsingLG")
		TNT1 A 0 A_TakeInventory("UsingDOEAmmo")
		TNT1 A 0 A_TakeInventory("FiredPlasmaCell")
        TNT1 A 0 A_StopSound(6)
        TNT1 A 0 A_StopSound(7)
        QLTG A 1
//        TNT1 A 0 A_JumpIfInventory("Thunderbolt",1,"ConsiderTB")//
      Consider6:
        TNT1 A 0 A_JumpIfInventory("GotWeapon5",1,"ConsiderQRL")
      Consider5:
        TNT1 A 0 A_JumpIfInventory("GotWeapon3",1,"ConsiderQGL")
      Consider4:
        TNT1 A 0 A_JumpIfInventory("GotWeapon6",1,"ConsiderSNG")
      Consider3:
        TNT1 A 0 A_JumpIfInventory("GotWeapon4",1,"ConsiderNG")
      Consider2:
        TNT1 A 0 A_JumpIfInventory("GotWeapon2",1,"ConsiderDSG")
      Consider1:
        TNT1 A 0 A_JumpIfInventory("GotWeapon0",1,"ConsiderLasCan")
      Consider0:
        QLTG A 1 A_SelectWeapon("Single Shotgun")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
        
     /*ConsiderTB:
        TNT1 A 0 A_JumpIfInventory("Cell",1,"SelectTB")
        goto Consider6*/
      ConsiderQRL:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"SelectQRL")
        goto Consider5
      ConsiderQGL:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"SelectQGL")
        goto Consider4
      ConsiderSNG:
        TNT1 A 0 A_JumpIfInventory("Clip",2,"SelectSNG")
        goto Consider3
      ConsiderNG:
        TNT1 A 0 A_JumpIfInventory("Clip",1,"SelectNG")
        goto Consider2
      ConsiderDSG:
        TNT1 A 0 A_JumpIfInventory("Shell",1,"SelectDSG")
        goto Consider1
      ConsiderLasCan:
        TNT1 A 0 A_JumpIfInventory("Cell",1,"SelectLasCan")
        goto Consider0

     /* SelectTB:
        TNT1 A 0 A_SelectWeapon("Thunderbolt")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect*/
      SelectQRL:
        TNT1 A 0 A_SelectWeapon("  Rocket Launcher  ")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
      SelectQGL:
        TNT1 A 0 A_SelectWeapon("Grenade Launcher")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
      SelectSNG:
        TNT1 A 0 A_SelectWeapon("Super Nailgun")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
      SelectNG:
        TNT1 A 0 A_SelectWeapon("Nailgun")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
      SelectDSG:
        TNT1 A 0 A_SelectWeapon("Double Shotgun")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect
      SelectLasCan:
        TNT1 A 0 A_SelectWeapon("Laser Cannon")
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        goto Deselect		
    }
}

actor LGDischarge
{
    Radius 8
    Height 8

    +NODAMAGETHRUST
    +FORCERADIUSDMG
    +NOTIMEFREEZE

    Projectile

    Obituary "$SAMSARA_RANGER_OB_SLOT7_2"

    States
    {
      Spawn:
        TNT1 A 1
        TNT1 A 0 A_Explode(18 * (ACS_NamedExecuteWithResult("SamsaraDecorate", 5)), 4096, 0)
        TNT1 A 0 A_Explode(17 * (ACS_NamedExecuteWithResult("SamsaraDecorate", 5)), 4096)
        TNT1 A 0 A_TakeFromTarget("Cell")
        stop
    }
}

actor LGFrame: Inventory
{
    inventory.maxamount 0x7FFFFFFF
    +UNDROPPABLE
}

actor UsingLG: Boolean {}

ACTOR LGBeamProjectile : FastProjectile
{
	Speed 256
	Damage (10)
	//+MTHRUSPECIES
	//+THRUSPECIES
	+BLOODLESSIMPACT
    +NOTIMEFREEZE
	Height 8
	Radius 4
	DamageType "QuakeElectric"
	Renderstyle Translucent
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 1 A_Die
			Goto Death	
		Death:
			TNT1 A 0 A_Stop
			TNT1 A 0 A_SpawnItemEx("LGPuff")
			TNT1 A 0 A_JumpIf(CallACS("Samsara_Laser",14,28,32) == 1, 1)
			TNT1 A 5
			stop
		}
}			
	
	
/*	Spawn:
		TNT1 A 0 NoDelay A_ChangeFlag(PAINLESS,Random(0,128))
		TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-MomX,-MomY,-MomZ,0,WARPF_ABSOLUTEOFFSET|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", false)
		TNT1 A 0 A_SpawnItemEx("LGBeam",0,0,0,(MomX*0.001), (MomY*0.001), (MomZ*0.001), Angle, SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEANGLE)
		TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX,MomY,MomZ,0,WARPF_ABSOLUTEOFFSET|WARPF_NOCHECKPOSITION)
	Moving:
		TNT1 A 0 A_JumpIfCloser(496,1)
		Stop
		TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", false)
		TNT1 A 0 A_SpawnItemEx("LGBeam",0,0,0,(MomX*0.001), (MomY*0.001), (MomZ*0.001), Angle, SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEANGLE)
		TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,"Moving") 
		stop
	Remove:
		TNT1 A 1
		stop
	}
}*/

ACTOR LGBeamProjectileCoop : LGBeamProjectile { +THRUSPECIES +MTHRUSPECIES Species "Player" }
ACTOR LGBeamProjectile2 : LGBeamProjectile { 
	Damage (30)
	States
	{
		Spawn:
			TNT1 A 0 NoDelay A_ChangeFlag(PAINLESS,Random(0,128))
			TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,-MomX,-MomY,-MomZ,0,WARPF_ABSOLUTEOFFSET|WARPF_NOCHECKPOSITION)
			TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", false)
			TNT1 A 0 A_SpawnItemEx("LGBeam",0,0,0,(MomX*0.001), (MomY*0.001), (MomZ*0.001), Angle, SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEANGLE)
			TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX,MomY,MomZ,0,WARPF_ABSOLUTEOFFSET|WARPF_NOCHECKPOSITION)
		Moving:
			TNT1 A 0 A_JumpIfCloser(496,1)
			Stop
			TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", false)
			TNT1 A 0 A_SpawnItemEx("LGBeam",0,0,0,(MomX*0.001), (MomY*0.001), (MomZ*0.001), Angle, SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEANGLE)
			TNT1 A 0 A_ChangeFlag("CLIENTSIDEONLY", true)
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,1) stop
			TNT1 A 0 A_Warp(AAPTR_DEFAULT,MomX/5,MomY/5,MomZ/5,0,WARPF_ABSOLUTEOFFSET,"Moving") 
			stop
		Remove:
			TNT1 A 1
			stop
			}
}	

actor LGBeam
{
	+NOINTERACTION
	+NOBLOCKMAP
	+CLIENTSIDEONLY
    +NOTIMEFREEZE
	Height 1
	Radius 1
//	DamageType "QuakeElectric"
    States
    {
      Spawn:
        TNT1 A 0
		TNT1 A 0 A_Jump(256,"A","B","C","D","E","F")
	  A:
        _BLT A 2 bright
        stop
	  B:
        _BLT B 2 bright
        stop
	  C:
        _BLT C 2 bright
        stop
	  D:
        _BLT D 2 bright
        stop
	  E:
        _BLT E 2 bright
        stop
	  F:
        _BLT F 2 bright
        stop
    }
}

actor LGPuff: BulletPuff
{
    +ALWAYSPUFF
    +PUFFONACTORS
    +PUFFGETSOWNER
    +BLOODLESSIMPACT
    //+FORCERADIUSDMG
    +NODAMAGETHRUST
    +NOTIMEFREEZE
    VSpeed 0
    Scale 0.2
    RenderStyle Add
	DamageType "QuakeElectric"
    //Obituary "%o \csaccepts\c- %k's \csshaft.\c-"
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 A_Jump(128,"A","B","C","D","E","F")
	  A:
        SPKW AA 1 bright
        stop
	  B:
		SPKW BB 1 Bright
		Stop
	  C:
		SPKW CC 1 Bright
		Stop		
	  D:
		SPKW DD 1 Bright
		Stop
	  E:
		SPKW EE 1 Bright
		Stop
	  F:
		SPKW FF 1 Bright
		Stop		
    }
}

actor FiredPlasmaCell : Boolean {}

Actor PlasmaCellBall
{
	Radius 3
	Height 5
	Speed 24
	Damage (136)
	Projectile
	+FORCERADIUSDMG
	DeathSound "plasmacell/hit"
	Obituary "o% was obliterated by %k."
	DamageType "QuakeElectric"
	States
	{
	Spawn:
		BAL7 A 0 NoDelay A_PlaySound("PlasmaCell/Fly",3,1.0,1,ATTN_NORM)
	SpawnLoop:	
		BAL7 A 2 Bright
		Loop
	Death:
		BAL7 A 0 A_StopSound(3)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,30,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,60,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,90,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,120,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,150,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,180,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,210,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,240,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,270,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,300,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("PlasmaCellBallZapper",0,0,330,CMF_AIMDIRECTION)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlasmaDebris",Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1,Random(-3,3)+1)
		BAL7 A 0 Bright
		BAL7 A 5 Bright A_Explode(150,150)
		Stop
	}
}

Actor PlasmaCellBall_Coop : PlasmaCellBall
{
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	Species "Player"
	DamageType "QuakeElectric"
	States
	{
	Spawn:
		BAL7 A 0 NoDelay A_PlaySound("PlasmaCell/Fly",3,1.0,1,ATTN_NORM)
	SpawnLoop:	
		BAL7 A 2 Bright
		Loop	
	}
}

Actor PlasmaCellBallZapper
{
	Height 4
	Radius 2
	Projectile
	+ISMONSTER
	+FRIENDLY
	+QUICKTORETALIATE
	+NOTARGET
	+NOCLIP
	-COUNTKILL
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_RearrangePointers(AAPTR_DEFAULT,AAPTR_Target)
		TNT1 A 0 A_ClearTarget
		TNT1 A 0 A_CopyFriendliness
		TNT1 AAAA 0 A_LookEx(0,0,0,0,30)
		Stop
	See:
		TNT1 A 0
		TNT1 A 0 A_JumpIfCloser(256,"Missile")
		Stop
	Missile:
		TNT1 A 0 A_CustomMissile("LGBeamProjectile2",0)
		goto Death
	Death:
		TNT1 A 1
		Stop
	}
}

Actor PlasmaCellBallZapper_Coop : PlasmaCellBallZapper
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
}

ACTOR PlasmaDebris
{
	Radius 1
	Height 1
	+NOBLOCKMAP
	+DROPOFF
	+CANNOTPUSH
	+SKYEXPLODE
	+NOBLOCKMONST
	+CLIENTSIDEONLY
	+THRUACTORS
	+NOGRAVITY
	+NOINTERACTION
	States
	{
	Spawn:
		QPRT FGHIJ 5 BRIGHT
		Stop
	Death:
		TNT1 A 5
		Stop
	}
}

actor LGPlasmaDischarge : LGDischarge
{
    States
    {
      Spawn:
        TNT1 A 1
        TNT1 A 0 A_Explode(18 * (ACS_NamedExecuteWithResult("SamsaraDecorate", 5, 1)), 4096, 0) // currently unsure of how damage is calculated, but this should suffice for now
        TNT1 A 0 A_Explode(17 * (ACS_NamedExecuteWithResult("SamsaraDecorate", 5, 1)), 4096)
        TNT1 A 0 A_TakeFromTarget("PlasmaCell")
        stop
    }
}
