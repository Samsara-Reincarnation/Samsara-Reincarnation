actor SamsaraWMCChargeTime: Counter { Inventory.MaxAmount 7 }
actor UsingWMC: Boolean {}
actor WMCVerticalShit: Counter { Inventory.MaxAmount 7 }

actor "ONI-71 Wave Motion Cannon": Weapon// replaces RocketLauncher
{
    Weapon.BobRangeX 0
    Weapon.BobStyle Smooth
    Weapon.SelectionOrder 2800
    //Weapon.SlotNumber 7
	Inventory.RestrictedTo "MarathonPlayer"    
    Inventory.PickupMessage "You picked up the ONI-71 Wave Motion Cannon!"
    Weapon.AmmoType     "WMCAmmo"
    Weapon.AmmoGive     0
    Weapon.AmmoUse      1
    Weapon.AmmoType2    "MortarAmmo"
    Weapon.AmmoGive2    0
    Weapon.AmmoUse2     1
//  Scale 0.5
    Tag "ONI-71 Wave Motion Cannon"
    +INVENTORY.UNDROPPABLE
    +NOALERT
    +WEAPON.EXPLOSIVE
    +WEAPON.NOAUTOFIRE
    +AMMO_OPTIONAL
    +ALT_AMMO_OPTIONAL
    Radius              12
    Height              12
    States
    {
      Spawn:
        WMCP A -1
        stop

      Ready:
        MWMC A 1 A_WeaponReady
      ReadyAmmoCheck1:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"ReadyAmmoCheck1Reloadable")
      ReadyAmmoCheck2:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"ReadyAmmoCheck2Reloadable")
        goto Ready

      ReadyAmmoCheck1Reloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"ReadyAmmoCheck2")
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",1,"ReadyAmmoCheck2")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"Reload")
        TNT1 A 0 A_JumpIfInventory("Cell",5,"Reload")
        goto ReadyAmmoCheck2

      ReadyAmmoCheck2Reloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"Ready")
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",1,"Ready")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"AltReload")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,"AltReload")
        goto Ready

      Deselect:
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",0,"Deselect7")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",6,"Deselect6")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",5,"Deselect5")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",4,"Deselect4")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",3,"Deselect3")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",2,"Deselect2")
        TNT1 A 0 A_JumpIfInventory("WMCVerticalShit",1,"Deselect1")
        goto Deselect0
      Deselect7:
        TNT1 A 0 Offset(0,32)
        MWMC A 1 Offset(0,35)
        MWMC A 1 Offset(0,38)
        MWMC A 1 Offset(0,41)
        MWMC A 1 Offset(0,44) // 5
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect6:
        MWMC A 1 Offset(0,47)
        MWMC A 1 Offset(0,50)
        MWMC A 1 Offset(0,53)
        MWMC A 1 Offset(0,56)
        MWMC A 1 Offset(0,59) // 10
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect5:
        MWMC A 1 Offset(0,62)
        MWMC A 1 Offset(0,65)
        MWMC A 1 Offset(0,68)
        MWMC A 1 Offset(0,71)
        MWMC A 1 Offset(0,74) // 15
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect4:
        MWMC A 1 Offset(0,77)
        MWMC A 1 Offset(0,80)
        MWMC A 1 Offset(0,83)
        MWMC A 1 Offset(0,86)
        MWMC A 1 Offset(0,89) // 20
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect3:
        MWMC A 1 Offset(0,92)
        MWMC A 1 Offset(0,95)
        MWMC A 1 Offset(0,98)
        MWMC A 1 Offset(0,101)
        MWMC A 1 Offset(0,104) // 25
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect2:
        MWMC A 1 Offset(0,107)
        MWMC A 1 Offset(0,110)
        MWMC A 1 Offset(0,113)
        MWMC A 1 Offset(0,116)
        MWMC A 1 Offset(0,119) // 30
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect1:
        MWMC A 1 Offset(0,122)
        MWMC A 1 Offset(0,125)
        MWMC A 1 Offset(0,127)
        MWMC A 1 Offset(0,130)
        MWMC A 1 Offset(0,133) // 35
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      Deselect0:
        MWMC A 1 Offset(0,136)
        TNT1 A 0 A_TakeInventory("WMCVerticalShit")
        MWMC A 1 A_Lower
        wait

      Select:
        TNT1 A 0 A_TakeInventory("UsingFists")
        TNT1 A 0 A_TakeInventory("UsingPistols")
        TNT1 A 0 A_TakeInventory("UsingDualPistols")
        TNT1 A 0 A_TakeInventory("UsingSMG")
        TNT1 A 0 A_TakeInventory("UsingPacifier")
        TNT1 A 0 A_TakeInventory("UsingShotguns")
        TNT1 A 0 A_TakeInventory("UsingDualShotguns")
        TNT1 A 0 A_TakeInventory("UsingFusionPistol")
        TNT1 A 0 A_TakeInventory("UsingAssaultRifle")
        TNT1 A 0 A_TakeInventory("UsingSpanker")
        TNT1 A 0 A_TakeInventory("UsingToasty")
        //TNT1 A 0 A_TakeInventory("UsingWMC")
        TNT1 A 0 A_TakeInventory("UsingAlienWeapon")
        TNT1 A 0 A_TakeInventory("UsingAlienWeapon2")
        //TNT1 A 0 A_TakeInventory("UsingMarathonInstagib")

        TNT1 A 0 A_GiveInventory("UsingWMC")
      SelectReload1:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"SelectReload1AmmoCheck")
      SelectReload2:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"SelectReload2AmmoCheck")
      Select0:
        TNT1 A 0 A_TakeInventory("WMCVerticalShit")
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,136) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 35
        TNT1 A 0 A_TakeInventory("WMCVerticalShit")
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,133) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,130) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,127) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,125) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select1:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,122) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 30
        MWMC A 1 Offset(0,119) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,116) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,113) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,110) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select2:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,107) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 25
        MWMC A 1 Offset(0,104) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,101) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,98) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,95) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select3:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,92) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 20
        MWMC A 1 Offset(0,89) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,86) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,83) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,80) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select4:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,77) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 15
        MWMC A 1 Offset(0,74) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,71) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,68) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,65) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select5:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,62) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 10
        MWMC A 1 Offset(0,59) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,56) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,53) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,50) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select6:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,47) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 5
        MWMC A 1 Offset(0,44) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,41) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,38) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,35) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
      Select7:
        TNT1 A 0 A_GiveInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,32) A_Raise
        wait

      SelectReload1AmmoCheck:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"SelectReload2")
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",1,"SelectReload2")
      SelectReload1Ammo:
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",0,"SelectReload2")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_JumpIfInventory("Cell",5,1)
        goto SelectReload2
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_TakeInventory("Cell",5)
        TNT1 A 0 A_GiveInventory("WMCAmmo")
        loop

      SelectReload2AmmoCheck:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"Select0")
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",1,"Select0")
      SelectReload2Ammo:
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",0,"Select0")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,1)
        goto Select0
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_TakeInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("MortarAmmo")
        loop

      Fire:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",0,"FireModernReloadable")
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"FireClassicReloadable")
      FireNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"FireChargeStart")
        TNT1 A 0 A_JumpIfInventory("Cell",5,"FireChargeStart")
        goto Ready

      FireClassicReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"FireChargeStart")
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",1,"FireChargeStart")
      FireClassicReloadableDryCheck:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"Reload")
        TNT1 A 0 A_JumpIfInventory("Cell",5,"Reload")
        goto Ready

      FireModernReloadable:
        TNT1 A 0 A_JumpIfInventory("SynthFireReload",1,1)
        goto FireClassicReloadable
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",0,"FireClassicReloadable")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"Reload")
        TNT1 A 0 A_JumpIfInventory("Cell",5,"Reload")
        goto FireClassicReloadable

      FireChargeStart:
        MWMC A 5 A_TakeInventory("SamsaraWMCChargeTime")
      FireCharge1:
        WMC1 B 2 A_PlaySound("wmc/chargeup",CHAN_WEAPON)
        WMC1 CDEFGHIJ 2
        WMC1 KLM 4
        TNT1 A 0 A_PlaySound("wmc/beep1",CHAN_WEAPON)
        TNT1 A 0 A_SetBlend("Red",0.4,8)
        TNT1 A 0 A_ReFire("FireCharge1Ready")
        TNT1 A 0 A_PlaySound("wmc/chargedown",CHAN_WEAPON)
        WMC1 MLK 4
        WMC1 JIHGFEDCB 2
        goto Ready

      FireCharge1Ready:
        WMC2 A 2 A_JumpIfInventory("SamsaraWMCChargeTime",0,"FireCharge2")
        TNT1 A 0 A_GiveInventory("SamsaraWMCChargeTime")
        WMC2 A 1 A_ReFire("FireCharge1Ready")
      FireLevel1:
        TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_GiveInventory("SamsaraMarathonWMCPrimaryLevel1AttackHandler")
      FireFinish:
        TNT1 A 0 A_TakeInventory("SamsaraWMCChargeTime")
        MWMC B 2 A_ZoomFactor(0.99,ZOOM_INSTANT)
        MWMC C 2 A_ZoomFactor(1,ZOOM_INSTANT)
        MWMC DE 1
        MWMC FGP 5
        MWMC H 2 A_PlaySound("wmc/reload")
        MWMC IJ 2
        MWMC A 2
        TNT1 A 0 A_ReFire
        goto Ready

      FireCharge2:
        TNT1 A 0 A_TakeInventory("SamsaraWMCChargeTime")
        WMC2 B 2 A_PlaySound("wmc/chargeup",CHAN_WEAPON)
        WMC2 CDEFGHIJ 2
        WMC2 KLM 4
        TNT1 A 0 A_PlaySound("wmc/beep1",CHAN_WEAPON)
        TNT1 A 0 A_SetBlend("Red",0.4,8)
        TNT1 A 0 A_ReFire("FireCharge2Ready")
      FireCharge2Ready:
        WMC3 A 2 A_JumpIfInventory("SamsaraWMCChargeTime",0,"FireCharge3")
        TNT1 A 0 A_GiveInventory("SamsaraWMCChargeTime")
        WMC3 A 1 A_ReFire("FireCharge2Ready")
      FireLevel2:
        TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_GiveInventory("SamsaraMarathonWMCPrimaryLevel2AttackHandler")
        goto FireFinish

      FireCharge3:
        TNT1 A 0 A_TakeInventory("SamsaraWMCChargeTime")
        WMC3 B 2 A_PlaySound("wmc/chargeup",CHAN_WEAPON)
        WMC3 CDEFGHIJ 2
        WMC3 KLM 4
        TNT1 A 0 A_PlaySound("wmc/beep2",CHAN_WEAPON)
        TNT1 A 0 A_SetBlend("White",0.8,12)
        TNT1 A 0 A_ReFire("FireCharge3Ready")
      FireCharge3Ready:
        WMC4 A 2
        WMC4 A 1 A_ReFire("FireCharge3Ready")
      FireRailLevel3:
        TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_GiveInventory("SamsaraMarathonWMCPrimaryLevel3AttackHandler")
        goto FireFinish

      Reload:
        TNT1 A 0 Offset(0,32)
        MWMC A 1 Offset(0,35) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,38) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,41) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,44) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 5
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower7:
        MWMC A 1 Offset(0,47) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,50) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,53) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,56) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,59) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 10
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower6:
        MWMC A 1 Offset(0,62) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,65) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,68) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,71) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,74) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 15
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower5:
        MWMC A 1 Offset(0,77) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,80) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,83) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,86) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,89) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 20
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower4:
        MWMC A 1 Offset(0,92) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,95) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,98) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,101) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,104) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 25
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower3:
        MWMC A 1 Offset(0,107) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,110) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,113) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,116) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,119) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 30
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower2:
        MWMC A 1 Offset(0,122) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,125) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,127) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,130) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,133) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 35
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      ReloadLower1:
        MWMC A 1 Offset(0,136) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        TNT1 A 0 A_TakeInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,139) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,142) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,145) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,148) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 40
      ReloadLower0:
        MWMC A 1 Offset(0,151) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,154) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,157) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,160) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 10 Offset(0,163) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 45
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"ReloadAmmo")
      ReloadFinish:
        MWMC A 1 Offset(0,163) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,160) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,157) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,154) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,151) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 40
        MWMC A 1 Offset(0,148) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,145) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,142) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,139) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        goto Select0

      ReloadAmmo:
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",0,"ReloadFinish")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_JumpIfInventory("Cell",5,1)
        goto ReloadFinish
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_TakeInventory("Cell",5)
        TNT1 A 0 A_GiveInventory("WMCAmmo")
        loop

      AltFire:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",0,"AltFireModernReloadable")
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"AltFireClassicReloadable")
      AltFireNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"AltFireActual")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,"AltFireActual")
        goto Ready

      AltFireClassicReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"AltFireActual")
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",1,"AltFireActual")
      AltFireClassicReloadableDryCheck:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"AltReload")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,"AltReload")
        goto Ready

      AltFireModernReloadable:
        TNT1 A 0 A_JumpIfInventory("SynthFireReload",1,1)
        goto AltFireClassicReloadable
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",0,"AltFireClassicReloadable")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"AltReload")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,"AltReload")
        goto AltFireClassicReloadable

      AltFireActual:
        TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Ready")
        MWMC A 2 A_AlertMonsters
        TNT1 A 0 A_GiveInventory("SamsaraMarathonWMCSecondaryAttackHandler")
      AltFireFinish:
        MWMC K 4 Bright A_Light2
        MWMC L 4 Bright A_Light1 
        MWMC M 4 Bright A_Light0
        MWMC N 4
        MWMC O 5
        MWMC A 3
        TNT1 A 0 A_ReFire
        goto Ready

      AltReload:
        TNT1 A 0 Offset(0,32)
        MWMC A 1 Offset(0,35) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,38) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,41) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,44) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 5
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower7:
        MWMC A 1 Offset(0,47) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,50) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,53) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,56) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,59) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 10
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower6:
        MWMC A 1 Offset(0,62) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,65) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,68) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,71) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,74) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 15
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower5:
        MWMC A 1 Offset(0,77) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,80) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,83) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,86) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,89) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 20
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower4:
        MWMC A 1 Offset(0,92) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,95) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,98) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,101) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,104) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 25
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower3:
        MWMC A 1 Offset(0,107) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,110) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,113) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,116) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,119) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 30
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower2:
        MWMC A 1 Offset(0,122) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,125) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,127) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,130) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,133) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 35
        TNT1 A 0 A_TakeInventory("WMCVerticalShit",1)
      AltReloadLower1:
        MWMC A 1 Offset(0,136) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        TNT1 A 0 A_TakeInventory("WMCVerticalShit")
        MWMC A 1 Offset(0,139) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,142) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,145) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,148) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 40
      AltReloadLower0:
        MWMC A 1 Offset(0,151) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,154) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,157) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 1 Offset(0,160) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        MWMC A 10 Offset(0,163) A_WeaponReady(WRF_NOBOB|WRF_NOFIRE) // 45
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"AltReloadAmmo")
        goto ReloadFinish

      AltReloadAmmo:
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",0,"ReloadFinish")
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,1)
        goto ReloadFinish
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        TNT1 A 0 A_TakeInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("MortarAmmo")
        loop
    }
}

actor SamsaraMarathonWMCPrimaryLevel1AttackHandler : Trigger
{
    States
    {
      // Ammo check stuff
      Pickup:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"PickupCheckAmmoReloadable")
      PickupCheckAmmoNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupTakeAmmoNonReloadable")
        TNT1 A 0 A_JumpIfInventory("Cell",5,"PickupTakeAmmoNonReloadable")
        stop

      PickupCheckAmmoReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",1,"PickupTakeAmmoReloadable")
        stop

      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("wmc/railfire",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
      PickupAttackDM:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel1",0,false)
      PickupFinish:
        TNT1 A 0 A_Recoil(7)
        stop

      PickupAttackCoop:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissileCoop",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel1Coop",0,false)
        goto PickupFinish

      // Ammo taking stuff
      PickupTakeAmmoNonReloadable:
        TNT1 A 0 A_TakeInventory("Cell",5,TIF_NOTAKEINFINITE)
        goto PickupAttack

      PickupTakeAmmoReloadable:
        TNT1 A 0 A_TakeInventory("WMCAmmo",1)
        goto PickupAttack
    }
}

actor SamsaraMarathonWMCPrimaryLevel2AttackHandler : SamsaraMarathonWMCPrimaryLevel1AttackHandler
{
    States
    {
      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("wmc/railfire",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackSP")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
      PickupAttackDM:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel2DM",0,false)
        goto PickupFinish

      PickupAttackSP:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel2",0,false)
        goto PickupFinish

      PickupAttackCoop:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissileCoop",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel2Coop",0,false)
        goto PickupFinish

      // Ammo taking stuff
      PickupTakeAmmoNonReloadable:
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
        goto PickupAttack

      PickupTakeAmmoReloadable:
        TNT1 A 0 A_TakeInventory("WMCAmmo",2)
        goto PickupAttack
    }
}

actor SamsaraMarathonWMCPrimaryLevel3AttackHandler : SamsaraMarathonWMCPrimaryLevel1AttackHandler
{
    States
    {
      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("wmc/railfire",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackSP")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
      PickupAttackDM:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel3DM",0,false)
        goto PickupFinish

      PickupAttackSP:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel3",0,false)
        goto PickupFinish

      PickupAttackCoop:
        TNT1 A 0 A_FireCustomMissile("WMCBeamMissileCoop",0,false)
        TNT1 A 0 A_FireCustomMissile("WMCRailLevel3Coop",0,false)
        goto PickupFinish

      // Ammo taking stuff
      PickupTakeAmmoNonReloadable:
        TNT1 A 0 A_TakeInventory("Cell",20,TIF_NOTAKEINFINITE)
        goto PickupAttack

      PickupTakeAmmoReloadable:
        TNT1 A 0 A_TakeInventory("WMCAmmo",4)
        goto PickupAttack
    }
}

actor SamsaraMarathonWMCSecondaryAttackHandler : Trigger
{
    States
    {
      // Ammo check stuff
      Pickup:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",1,"PickupCheckAmmoReloadable")
      PickupCheckAmmoNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupTakeAmmoNonReloadable")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",5,"PickupTakeAmmoNonReloadable")
        stop

      PickupCheckAmmoReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",1,"PickupTakeAmmoReloadable")
        stop

      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("wmc/grenadefire",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
      PickupAttackDM:
        TNT1 A 0 A_FireCustomMissile("WMCGrenade",0,false,-1,3,0,5)
      PickupFinish:
        TNT1 A 0 A_Recoil(6)
        stop

      PickupAttackCoop:
        TNT1 A 0 A_FireCustomMissile("WMCGrenadeCoop",0,false,-1,3,0,5)
        goto PickupFinish

      // Ammo taking stuff
      PickupTakeAmmoNonReloadable:
        TNT1 A 0 A_TakeInventory("RocketAmmo",5,TIF_NOTAKEINFINITE)
        goto PickupAttack

      PickupTakeAmmoReloadable:
        TNT1 A 0 A_TakeInventory("MortarAmmo",1)
        goto PickupAttack
    }
}

actor WMCAmmo: Ammo
{
    +IGNORESKILL
    Inventory.MaxAmount 8
}

actor MortarAmmo: Ammo
{
    +IGNORESKILL
    Inventory.MaxAmount 3
}

actor WMCRailLevel1: FastProjectile
{
    Damage (random(150,200))
    Radius 15
    Height 15
    Speed 400
    Projectile
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_1"
    +RIPPER
    +NOBOSSRIP
    +BLOODSPLATTER
    +NOTIMEFREEZE
    +BLOODLESSIMPACT
    +EXTREMEDEATH
    RenderStyle Add
    Alpha 0.9
    Decal BFGScorch
    DamageType "WMCBeam"
    States
    {
      Spawn:
        TNT1 A 1
        loop
        
      Death:
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCRailLevel1Coop: WMCRailLevel1 { Species "Player" +THRUSPECIES }

actor WMCRailLevel2: FastProjectile
{
    Damage (random(150,200))
    Radius 15
    Height 15
    Speed 400
    Projectile
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_1"
    +RIPPER
    +NOBOSSRIP
    +BLOODSPLATTER
    +NOTIMEFREEZE
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
    +EXTREMEDEATH
    RenderStyle Add
    Alpha 0.9
    Decal BFGScorch
    DamageType "WMCBeam"
    States
    {
      Spawn:
        TNT1 A 1
        loop
        
      Death:
        TNT1 A 0 A_Explode(200+random(0,50),128,1)
        TNT1 A 0 A_Explode(250+random(0,100),128,0)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion",random(5,-5),random(5,-5),random(5,-5),0.4*random(2,5),0.4*random(2,5),0.4*random(2,5),random(0,360),128,0)
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCRailLevel2DM: WMCRailLevel2
{
    States
    {
      Death:
        TNT1 A 0 A_Explode(100+random(0,50),128,1)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion",random(5,-5),random(5,-5),random(5,-5),0.4*random(2,5),0.4*random(2,5),0.4*random(2,5),random(0,360),128,0)
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCRailLevel2Coop: WMCRailLevel2 { Species "Player" +THRUSPECIES }

actor WMCRailLevel3: FastProjectile
{
    Damage (random(150,200))
    Radius 30
    Height 30
    Speed 400
    Projectile
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_1"
    +RIPPER
    +NOBOSSRIP
    +BLOODSPLATTER
    +NOTIMEFREEZE
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
    +EXTREMEDEATH
    RenderStyle Add
    Alpha 0.9
    Decal BFGScorch
    DamageType "WMCBeam"
    States
    {
      Spawn:
        TNT1 A 1
        loop
        
      Death:
        TNT1 A 0 A_Explode(250+random(0,50),196)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,337,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,337,6)
        TNT1 A 1
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,337,6)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(2,5), 0.4*random(2,5), 0.4*random(2,5), random(0,360), 128, 0)
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCRailLevel3DM: WMCRailLevel3
{
    States
    {
      Spawn:
        TNT1 A 1
        loop
        
      Death:
        TNT1 A 0 A_Explode(50,196,0)
        TNT1 A 0 A_Explode(100,128)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,337,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,337,6)
        TNT1 A 1
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(2,5), 0.4*random(2,5), 0.4*random(2,5), random(0,360), 128, 0)
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCRailLevel3Coop: WMCRailLevel3
{
    Species "Player"
    +THRUSPECIES
    States
    {
      Death:
        TNT1 A 0 A_Explode(250+random(0,50),196)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyCoop",1,0,337,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCBeamMissileBabyCoop",1,0,337,6)
        TNT1 A 1
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,0,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,22,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,45,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,67,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,90,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,112,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,135,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,157,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,180,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,202,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,225,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,247,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,270,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,292,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,315,6)
        TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,337,6)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(2,5), 0.4*random(2,5), 0.4*random(2,5), random(0,360), 128, 0)
        WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
        stop
    }
}

actor WMCGrenade
{
    Decal Scorch
    Radius 6
    Height 8
    Mass 1
    Speed 15
    Damage 10
    DamageType "WMCNade"
    //Scale 0.55
    //Gravity 0.11
    DeathSound "wmc/grenadeexplode1"
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_2"
    Projectile
    -NOGRAVITY
    +LOWGRAVITY
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
	+EXTREMEDEATH
    //+GRENADETRAIL
    States
    {
      Spawn:
        WMCN AAAAAAAAAAAAAAA 1 Bright A_SpawnItem("MarathonGrenadeSmoke")
        
      Spawn2:
        WMCN A 1 Bright
        LOOP
        
      Death:
        TNT1 A 0 A_NoGravity
        TNT1 A 0 A_Explode(100+random(0,50),128)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(-5,5), 0.4*random(-5,5), 0.4*random(-5,5), random(0,360), 128, 0)
        TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenade2",0,0,random(-180,180),2,random(16,65))
        TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenade2",0,0,random(-180,180),2,random(16,65))
        TNT1 A 1 A_Scream
        Stop
    }
}

actor WMCGrenadeCoop: WMCGrenade
{
    +THRUSPECIES
    Species "Player"
    States
    {
      Death:
        TNT1 A 0 A_NoGravity
        TNT1 A 0 A_Explode(150+random(0,50),128)
        TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(-5,5), 0.4*random(-5,5), 0.4*random(-5,5), random(0,360), 128, 0)
        TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenadeCoop2",0,0,random(-180,180),2,random(16,65))
        TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenadeCoop2",0,0,random(-180,180),2,random(16,65))
        TNT1 A 1 A_Scream
        Stop
    }
}

actor WMCGrenade2
{
    Decal Scorch
    Radius 6
    Height 8
    Mass 1
    Speed 5
    Damage 5
    DamageType "WMCNade"
    Scale 0.3
    Gravity 0.35
    DeathSound "wmc/grenadeexplode2"
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_2"
    Projectile
    -NOGRAVITY
    +LOWGRAVITY
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
	+EXTREMEDEATH
    //+GRENADETRAIL
    States
    {
      Spawn:
        WMCN A 1 Bright
        LOOP
        
      Death:
        TNT1 A 0 A_NoGravity
        TNT1 A 0 A_Explode(50+random(0,20),96)
        TNT1 A 0 A_SpawnItem("WMCGrenadeExplosion2")
        TNT1 A 1 A_Scream
        Stop
    }
}

actor WMCGrenadeCoop2: WMCGrenade2
{
    +THRUSPECIES
    Species "Player"
    States
    {
      Death:
        TNT1 A 0 A_NoGravity
        TNT1 A 0 A_Explode(100+random(0,20),96)
        TNT1 A 0 A_SpawnItem("WMCGrenadeExplosion2")
        TNT1 A 1 A_Scream
        Stop
    }
}

actor WMCGrenadeExplosion
{
    Radius 1
    Height 1
    Speed 0
    +NOGRAVITY
    -SOLID
    +NOCLIP
    +RANDOMIZE
    +CLIENTSIDEONLY
    RenderStyle Add
    Alpha 0.75
    Scale 0.75
    States
    {
      Spawn:
        TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
        
      Spawn1:
        WMCN BCDEF 3 BRIGHT
        stop
        
      Spawn2:
        WMCN GHIJK 3 BRIGHT
        stop
        
      Spawn3:
        WMCN LMNOP 3 BRIGHT
        stop
        
      Spawn4:
        WMCN QRSTU 3 BRIGHT
        stop
    }
}

actor WMCGrenadeExplosion2
{
    Radius 1
    Height 1
    Speed 0
    +NOGRAVITY
    -SOLID
    +NOCLIP
    +RANDOMIZE
    +CLIENTSIDEONLY
    RenderStyle Add
    Alpha 0.75
    Scale 0.25
    States
    {
      Spawn:
        TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
        
      Spawn1:
        WMCN BCDEF 3 BRIGHT
        stop
        
      Spawn2:
        WMCN GHIJK 3 BRIGHT
        stop
        
      Spawn3:
        WMCN LMNOP 3 BRIGHT
        stop
        
      Spawn4:
        WMCN QRSTU 3 BRIGHT
        stop
    }
}

actor WMCRailLevel3Baby: FastProjectile
{
    Damage (random(100,150))
    Radius 10
    Height 10
    Speed 80
    Projectile
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_1"
    +RIPPER
    +NOBOSSRIP
    +BLOODSPLATTER
    +NOTIMEFREEZE
    +EXTREMEDEATH
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
    -SOLID
    DamageType "WMCBeam"
    DONTHURTSHOOTER
    RenderStyle Add
    Alpha 0.75
    Scale 0.25
    Decal Scorch
    States
    {
      Spawn:
        TNT1 A 1 A_SpawnItem("WMCRailLevel3BabyTrail")
        loop
        
      Death:
        TNT1 A 0 A_Explode(64,96)
        TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
        
      Spawn1:
        WMCN BCDEF 3 BRIGHT
        stop
        
      Spawn2:
        WMCN GHIJK 3 BRIGHT
        stop
        
      Spawn3:
        WMCN LMNOP 3 BRIGHT
        stop
        
      Spawn4:
        WMCN QRSTU 3 BRIGHT
        stop
    }
}

actor WMCRailLevel3BabyDM: WMCRailLevel3Baby
{
    Damage (random(5,10))
    States
    {
      Death:
        TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
        goto Spawn1
    }
}

actor WMCRailLevel3BabyCoop: WMCRailLevel3Baby { Species "Player" +THRUSPECIES }

actor WMCBeamExplode: FastProjectile
{
    Damage 0
    Radius 5
    Height 5
    Speed 20
    Projectile
    Obituary "$SAMSARA_MARATHON_OB_SLOT7_1"
    +RIPPER
    -SOLID
    -BLOODSPLATTER
    +NOTIMEFREEZE
    +EXTREMEDEATH
    +BLOODLESSIMPACT
    DamageType "WMCBeam"
    DONTHURTSHOOTER
    Decal Scorch
    States
    {
      Spawn:
        TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 1 A_Explode(48,128,0)
        
      Death:
        TNT1 A 0 A_Explode(64,128,0)
        stop
    }
}

actor WMCRailLevel3BabyTrail
{
    Radius 10
    Height 10
    Speed 0
    +NOGRAVITY
    -SOLID
    +RANDOMIZE
    +CLIENTSIDEONLY
    RenderStyle Add
    Alpha 0.9
    Scale 0.25
    States
    {
      Spawn:
        WCHT ACEGIKLMNOPQR 1 BRIGHT
        stop
    }
}

actor WMCBeamMissile
{
    radius 10
    height 10
    speed 100
    damage 0
    PROJECTILE
    +RIPPER
    +NOBOSSRIP
    -SOLID
    +NOBLOOD
    +CLIENTSIDEONLY
    states
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (100*sqrt(momx*momx + momy*momy))/-100, 0, (100*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (98*sqrt(momx*momx + momy*momy))/-100, 0, (98*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (96*sqrt(momx*momx + momy*momy))/-100, 0, (96*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (94*sqrt(momx*momx + momy*momy))/-100, 0, (94*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (92*sqrt(momx*momx + momy*momy))/-100, 0, (92*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (90*sqrt(momx*momx + momy*momy))/-100, 0, (90*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (88*sqrt(momx*momx + momy*momy))/-100, 0, (88*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (86*sqrt(momx*momx + momy*momy))/-100, 0, (86*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (84*sqrt(momx*momx + momy*momy))/-100, 0, (84*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (82*sqrt(momx*momx + momy*momy))/-100, 0, (82*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (80*sqrt(momx*momx + momy*momy))/-100, 0, (80*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (78*sqrt(momx*momx + momy*momy))/-100, 0, (78*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (76*sqrt(momx*momx + momy*momy))/-100, 0, (76*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (74*sqrt(momx*momx + momy*momy))/-100, 0, (74*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (72*sqrt(momx*momx + momy*momy))/-100, 0, (72*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (70*sqrt(momx*momx + momy*momy))/-100, 0, (70*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (68*sqrt(momx*momx + momy*momy))/-100, 0, (68*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (66*sqrt(momx*momx + momy*momy))/-100, 0, (66*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (64*sqrt(momx*momx + momy*momy))/-100, 0, (64*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (62*sqrt(momx*momx + momy*momy))/-100, 0, (62*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (60*sqrt(momx*momx + momy*momy))/-100, 0, (60*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (58*sqrt(momx*momx + momy*momy))/-100, 0, (58*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (56*sqrt(momx*momx + momy*momy))/-100, 0, (56*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (54*sqrt(momx*momx + momy*momy))/-100, 0, (54*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (52*sqrt(momx*momx + momy*momy))/-100, 0, (52*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (50*sqrt(momx*momx + momy*momy))/-100, 0, (50*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (48*sqrt(momx*momx + momy*momy))/-100, 0, (48*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (46*sqrt(momx*momx + momy*momy))/-100, 0, (46*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (44*sqrt(momx*momx + momy*momy))/-100, 0, (44*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (42*sqrt(momx*momx + momy*momy))/-100, 0, (42*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (40*sqrt(momx*momx + momy*momy))/-100, 0, (40*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (38*sqrt(momx*momx + momy*momy))/-100, 0, (38*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (36*sqrt(momx*momx + momy*momy))/-100, 0, (36*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (34*sqrt(momx*momx + momy*momy))/-100, 0, (34*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (32*sqrt(momx*momx + momy*momy))/-100, 0, (32*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (30*sqrt(momx*momx + momy*momy))/-100, 0, (30*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (28*sqrt(momx*momx + momy*momy))/-100, 0, (28*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (26*sqrt(momx*momx + momy*momy))/-100, 0, (26*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (24*sqrt(momx*momx + momy*momy))/-100, 0, (24*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (22*sqrt(momx*momx + momy*momy))/-100, 0, (22*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (20*sqrt(momx*momx + momy*momy))/-100, 0, (20*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (18*sqrt(momx*momx + momy*momy))/-100, 0, (18*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (16*sqrt(momx*momx + momy*momy))/-100, 0, (16*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (14*sqrt(momx*momx + momy*momy))/-100, 0, (14*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (12*sqrt(momx*momx + momy*momy))/-100, 0, (12*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (10*sqrt(momx*momx + momy*momy))/-100, 0, (10*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (8*sqrt(momx*momx + momy*momy))/-100, 0, (8*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (6*sqrt(momx*momx + momy*momy))/-100, 0, (6*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (4*sqrt(momx*momx + momy*momy))/-100, 0, (4*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (2*sqrt(momx*momx + momy*momy))/-100, 0, (2*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeam", (0*sqrt(momx*momx + momy*momy))/-100, 0, (0*momz)/-100, 0, 0, 0, 0, 128, 0)
        TNT1 A 1
        goto Spawn+1
        
      Death:
        TNT1 A 1 bright
        stop
    }
}

actor WMCBeamMissileCoop: WMCBeamMissile { Species "Player" +THRUSPECIES }

actor WMCBeamMissileBaby
{
    radius 10
    height 10
    speed 80
    damage 0
    PROJECTILE
    +RIPPER
    +NOBOSSRIP
    -SOLID
    +NOBLOOD
    +CLIENTSIDEONLY
    states
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (78*sqrt(momx*momx + momy*momy))/-80, 0, (78*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (72*sqrt(momx*momx + momy*momy))/-80, 0, (72*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (66*sqrt(momx*momx + momy*momy))/-80, 0, (66*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (60*sqrt(momx*momx + momy*momy))/-80, 0, (60*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (54*sqrt(momx*momx + momy*momy))/-80, 0, (54*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (48*sqrt(momx*momx + momy*momy))/-80, 0, (48*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (42*sqrt(momx*momx + momy*momy))/-80, 0, (42*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (36*sqrt(momx*momx + momy*momy))/-80, 0, (36*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (30*sqrt(momx*momx + momy*momy))/-80, 0, (30*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (24*sqrt(momx*momx + momy*momy))/-80, 0, (24*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (18*sqrt(momx*momx + momy*momy))/-80, 0, (18*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (12*sqrt(momx*momx + momy*momy))/-80, 0, (12*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (6*sqrt(momx*momx + momy*momy))/-80, 0, (6*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", (0*sqrt(momx*momx + momy*momy))/-80, 0, (0*momz)/-80, 0, 0, 0, 0, 128, 0)
        TNT1 A 1
        goto Spawn+1
        
      Death:
        TNT1 A 1 bright
        stop
    }
}

actor WMCBeamMissileBabyCoop: WMCBeamMissileBaby { Species "Player" +THRUSPECIES }

actor WMCBeam
{
    RenderStyle Add
    alpha 0.9
    +RANDOMIZE
    +NOCLIP
    +NOGRAVITY
    Scale 0.55
    +CLIENTSIDEONLY
    states
    {
      Spawn:
        WMCS A 2
        WMCS A 1 A_FadeOut(0.05)
        goto Spawn+1
    }
}

actor WMCBeamBaby
{
    RenderStyle Add
    alpha 0.9
    +RANDOMIZE
    +NOCLIP
    +NOGRAVITY
    Scale 0.2
    +CLIENTSIDEONLY
    states
    {
      Spawn:
        WMCS A 1 A_FadeOut(0.1)
        loop
    }
}