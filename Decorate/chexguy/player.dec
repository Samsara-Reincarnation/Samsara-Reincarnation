actor ChexWarrior : PlayerPawn
{
    Player.DisplayName "ChexWarrior"
    Player.StartItem "Mini-Zorcher", 1
    Player.StartItem " Bootspoon ", 1
    Player.StartItem "ChexClass", 1
    Player.StartItem "IsSamsaraClass", 1
    Player.StartItem "Clip", 50
	Player.StartItem "TauntButton", 1
    Player.Face "CHX"
    Player.Soundclass "ChexWarrior"
    Player.JumpZ 9//Default is 8
    BloodType "ChexBlood" //+NOBLOOD
	BloodColor "White"
	+NOBLOODDECALS
    +NOSKIN
    +DONTGIB
    -DONTBLAST
    -THRUSPECIES
    Species "Player"
	DamageFactor "RebelMissile", 0
	DamageFactor "DynamiteCoop", 0.0	
    DamageFactor "Telefrag", 2.0
	DamageFactor "SWFlameCoop", 0.0	
    DamageFactor "PoisonCloud", 1.65
    DamageFactor "Wraithverge", 0.9
    DamageFactor "CorvusCrossbow", 0.9
    DamageFactor "DragonClaw", 0.9
    DamageFactor "MarathonPistol", 0.8
	DamageFactor "SWStickyCoop", 0.0	
    DamageFactor "Pistol", 0.8
    DamageFactor "DoomFist", 0.8
    DamageFactor "ZorchPistol", 0.8
    DamageFactor "BFG", 0.8
    DamageFactor "BFGSpray", 0.8
    DamageFactor "Normal", 0.8
    DamageFactor "Zorch", 0.8
    DamageFactor "PhasingZorch", 0.8
    DamageFactor "RMR-BigPlasma", 0.7			
    DamageFactor "Ice", 0.8
    DamageFactor "Fire", 0.8
    DamageFactor "Slime", 0.8
    DamageFactor "Disintegrate", 0.8
    DamageFactor "Poison", 0.8
    DamageFactor "WolfenFlamethrower", 0.8
    DamageFactor "DukeDamage", 0.8
    DamageFactor "DukeExplosive", 0.8
    DamageFactor "DukeSpectral", 0.8
    DamageFactor "MightyBoot", 1.3
    DamageFactor "DukeIce", 0.8
    DamageFactor "DukePistol", 0.8
    DamageFactor "Explosive", 0.8
    DamageFactor "MarathonFusion", 0.8
    DamageFactor "DoomPlasma", 0.8
    DamageFactor "CorvusCrossbow", 0.8
    DamageFactor "CorvusHellstaff", 0.8
	DamageFactor "CorvusHellstaffTomed", 0.8
    DamageFactor "MarathonPlasma", 0.8
    DamageFactor "BJSpear", 0.8
    DamageFactor "DoomCacodemon", 0.8
    DamageFactor "DoomHellNoble", 0.8
    DamageFactor "DoomSpiderPlasma", 0.8
    DamageFactor "DoomTheseGuysAreTheBest", 0.8
    DamageFactor "HereNitrogolem", 0.8
    DamageFactor "HereAxeGreen", 0.8
    DamageFactor "HereAxeRed", 0.8
    DamageFactor "Wizard", 0.8
    DamageFactor "HereLichWind", 0.8
    DamageFactor "HereDsparil", 0.8
    DamageFactor "HexBishop", 0.8
    DamageFactor "HexSlaughtaur", 0.8
    DamageFactor "HexGreenFire", 0.8
    DamageFactor "HexStalkerShot", 0.8
    DamageFactor "HexHeresiarchPurple", 0.8
    DamageFactor "WMCBeam", 0.55
    DamageFactor "WMCNade", 0.55
    DamageFactor "QuakePistol", 0.8
    DamageFactor "NotQuadded", 0.8
    DamageFactor "SpectralNoQuad", 0.8
	DamageFactor "MarathonStun", 1.0
    DamageFactor "QuakeFire", 0.8 
	DamageFactor "FireExplosive", 0.8
    DamageFactor "Kamikaze", 1.33333333333
    DamageFactor "ZorchKamikaze", 1.33333333333
	DamageFactor "EnemyInfightDamage", 0.0
	DamageFactor "CMDMGSHIT", 0.0
	Damagefactor "RottExplosive", 0.8
	DamageFactor "RottFire", 0.8
	DamageFactor "RottBullet", 0.8
	DamageFactor "BlakePlasma", 0.8
	DamageFactor "BlakeBullet", 0.8
	DamageFactor "Dynamite", 0.8
	DamageFactor "LifeLeech", 0.8
	DamageFactor "Tesla", 0.8
	DamageFactor "CalebBullet", 0.8
	DamageFactor "CalebNapalm", 0.8
	DamageFactor "CalebFire", 0.8
	DamageFactor "PhosFireCoop", 0.0
	DamageFactor "EradCoopExplosive2", 0.0
    DamageFactor "EradCoopGreenFire", 0.0
    DamageFactor "C7MineBoom", 0.0	
	DamageFactor "PunchDagger", 0.7
	DamageFactor "ElectricBolt", 0.9
	DamageFactor "PoisonBolt", 0.8
	DamageFactor "MiniExplosive", 0.8
	DamageFactor "StrifeExplosive", 0.8
	DamageFactor "StrifeRebelBullet", 0.8
	DamageFactor "BCannonProj", 0.75
	DamageFactor "Disruptoruniversaldamageshit4", 0.8
	DamageFactor "Disruptoruniversaldamageshit3", 0.8
	DamageFactor "Disruptoruniversaldamageshit2",	0.8
	DamageFactor "Disruptoruniversaldamageshit1", 0.8
	DamageFactor "DisruptorWall", 0.7
	DamageFactor "SWNukeCoop", 0.0		
	DamageFactor "SWRailgunCoop", 0.0
	DamageFactor "SWFlame2Coop", 0.0
    RadiusDamageFactor 0.75
    Player.DamageScreenColor "Yellow"
    Player.ColorRange 192, 207
	var int user_scalex;
	var int user_scaley;
    States
    {
		Spawn:
			CHEX A 1
			Loop
		See:
			CHEX AAAABBBBCCCCDDDD 1
			Loop
		Missile:
			CHEX E 12 
			Goto Spawn
		Melee:
			CHEX F 6 BRIGHT
			Goto Missile
		Pain:
			CHEX G 4 
			CHEX G 4 A_Pain
			Goto Spawn
		  Pain.Flem:
		  Pain.Slime:
			CHEX G 4 A_SetBlend("60 b0 58",0.9,10)
			CHEX G 4 A_Pain
			goto Spawn
		Pain.Chickenator:
			CHEX G 1
			goto Spawn
		Pain.LifeLeech:
			TNT1 A 0 A_GiveToTarget("SerpentHealth", random(1,2))
			TNT1 A 0 A_GiveToTarget("HealthBonus",1)
			Goto Pain
		Death:
			CHEX H 10
			CHEX I 10 A_PlayerScream
			CHEX J 10 A_NoBlocking
			CHEX KLM 10
			CHEX N 20
			CHEX X -1
			Stop
		XDeath:
			FLEE A 3
			TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			FLEE B 20 A_PlaySound("chex/munch",0,1.0)
			FLEE C 5 A_PlaySound("chex/boop",0,0.7)
			FLEE B 5
			FLEE D 10
			TNT1 A 0 A_PlaySound("chex/selfzorch",0,0.7)
			FLEE EFGH 5
			ACLO E -1
			stop
		Death.ZorchPistol:
		Death.Zorch:
		Death.ZorchKamikaze:
		Death.PhasingZorch:
		Death.ZorchSpectral:
			CHEX G 0 A_Stop
			TNT1 A 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
			CHEX G 3 A_SpawnItem("ZorchEffectSmall")
			CHEX G 3 A_SetTranslucent(0.9,0)
			CHEX G 0 A_PlayerScream
			CHEX G 3 A_SetTranslucent(0.8,0)
			CHEX G 0 A_NoBlocking
			CHEX G 3 A_SetTranslucent(0.7,0)
			CHEX G 3 A_SetTranslucent(0.6,0)
			CHEX G 3 A_SetTranslucent(0.5,0)
			CHEX G 3 A_SetTranslucent(0.4,0)
			CHEX G 3 A_SetTranslucent(0.3,0)
			CHEX G 3 A_SetTranslucent(0.2,0)
			CHEX G 3 A_SetTranslucent(0.1,0)
			ACLO E 1 A_SetTranslucent(1,0)
			ACLO E -1
			stop
		CoopModeOn:
			TNT1 A 0
			TNT1 A 0 A_ChangeFlag("THRUSPECIES",1)
			TNT1 A 0 A_ChangeFlag("DONTBLAST",1)
			CHEX A 1
			goto Spawn
		Death.PhosFireCoop:
		Death.HexGreenFire:
		Death.QuakeFire:
		Death.FireExplosive:
		Death.PGFire:
		Death.WTRangedFire:
		Death.WolfenFlamethrower:	  
		Death.MarathonPlasma:
		Death.RottFire:
		Death.CalebFire:
		Death.LifeLeech:
		Death.TotenkopfFire:
		Burn:
			CWBN A 3 A_PlaySoundEx("*burndeath","voice",0,0)
			CWBN BCDEFGHI 3
			CWBN J 20
			CWBN J 0 A_PlaySoundEx("chex/burndeath2","body",0,0)
			CWBN KMNOP 3
			CWBN Q -1
			stop		
		Death.DukeDamage:
		Death.DukePistol:
			"####" A 0 A_Jump(218,"Death")
			"####" A 0 A_GiveToTarget("DukeKillTaunt",1)
			goto Death
		Death.MightyBoot:
			"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
			"####" A 0 A_Jump(64,"Death")
			"####" A 0 A_GiveToTarget("DukeBootTaunt",1)
			goto Death
		Death.DukeExplosive:
			"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
		DukeGibStart:
			"####" A 0 A_Jump(96,"XDeath")
			"####" A 0 A_GiveToTarget("DukeGibTaunt",1)
			Goto XDeath
		Death.DukeIce:
			"####" "#" 0 A_Jump(218,"Ice")
			"####" "#" 0 A_GiveToTarget("DukeDMTaunt1",1)
		Ice:
		Death.HexenIce:
		Death.Ice:
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_PlayerFreezeTranslation") 
			"####" "#" 0 A_PlayWeaponSound("misc/freeze")
			"####" "#" 0 A_UnsetSolid
			"####" "#" 70
			"####" "#" 0 A_SetTranslucent(0,0)
			"####" "######################################" 0 A_SpawnItemEx("IceChunk2",random(-1,1),random(-1,1),random(8,48),random(-2,2),random(-2,2),random(1,6))
			ACLO E 1 A_PlayWeaponSound("misc/icebreak")//A_FreezeDeathChunks
			TNT1 A -1
			Stop	
		Death.ExpanderDMG:
		XDeath.ExpanderDMG:
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoop
		ExpanderLoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
			loop
		ExpanderPop:	
			"####" "#" 10
			"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
			"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
			"####" A 0 A_Jump(96,2)
			"####" A 0 A_GiveToTarget("DukeGibTaunt", 1)
			"####" A 0 A_SetScale (1.0, 1.0)
			"####" A 0 A_UnsetSolid
			TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt",1)
			TNT1 A -1 A_UnsetSolid
			Stop
		Death.ExpanderDMGCoop:
		XDeath.ExpanderDMGCoop:
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoopCoop
		ExpanderLoopCoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
			loop
		ExpanderPopCoop:	
			"####" "#" 10
			"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
			"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
			"####" A 0 A_Jump(96,2)
			"####" A 0 A_GiveToTarget("DukeGibTaunt", 1)
			"####" A 0 A_SetScale (1.0, 1.0)
			"####" A 0 A_UnsetSolid
			TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt",1)
			TNT1 A -1 A_UnsetSolid
			Stop
		Pain.ShrinkerDMG:
			TNT1 A 0 A_ChangeFlag("NOPAIN",true)
			TNT1 A 0 A_ChangeFlag("NODAMAGE",true)
			CHEX G 0 ACS_NamedExecuteAlways("Samsara_PlayerShrinker")
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("ChexWarrior_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			TNT1 A 0 A_ChangeFlag("NOPAIN",false)
			TNT1 A 0 A_ChangeFlag("NODAMAGE",false)
			Goto Spawn
		Pain.MightyBoot:
			CHEX G 1 ACS_NamedExecuteAlways("SamsaraRecoil", 0, 25, 5, 24)
			CHEX G 1 A_PlaySoundEx("duke/kickhit","body",0,0)
			TNT1 A 0 A_Recoil(12)
			CHEX G 6 A_Pain
			Goto See
		Pain.MarathonStun:
			TNT1 A 0 A_Stop
			CHEX G 1 ACS_NamedExecuteAlways("SamsaraRecoil", 0, 25, 5, 100)
			TNT1 A 0 A_GiveInventory("NothingSpeed")
			TNT1 A 0 A_SetBlend("White",0.9,105)
			CHEX G 1 A_PlaySoundEx("marathon/tech50/stun","body",0,0)
			CHEX G 6 A_Pain
			Goto See
		Death.QuakeElectric:
		Death.NotQuadded:
		Death.QuakeExplosive:
			"####" A 0 A_JumpIfHealthLower(-50, "XDeathForRanger")
			goto Death
		XDeath.QuakeElectric:
		XDeath.NotQuadded:
		XDeath.QuakeExplosive:
		XDeathForRanger:
		Death.RottExplosive:
			Goto XDeath
		Death.RottDisintegrate:
			TNT1 A 0 A_PlayerScream
			TNT1 A 0 A_UnsetSolid
			TNT1 A 5 A_SpawnItem("RGodModeDeath")
			TNT1 A -1
			Stop
		Pain.Shock:
		Pain.Tesla:
			CBGS A 4 A_Pain
			CBGS A 4
			Goto See
		Pain.LifeLeech:
			TNT1 A 0 A_GiveToTarget("SerpentHealth", random(1,2))
			TNT1 A 0 A_GiveToTarget("HealthBonus",1)
			Goto Pain
		Death.CalebNapalm:
		Death.Vodoo:
		Death.VoodooPuff:
		Death.DynamiteCoop:
		Death.Dynamite:	  
		Death.Shock:	  	  
			"####" A 0 A_JumpIfHealthLower(-50, "XDeathForCaleb")
		Death.Tesla:
		Death.CalebBullet:
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_GiveToTarget("CalebDMTaunt1", 1)
			Goto Death
		XDeathForCaleb:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(96,"XDeath")
			"####" A 0 A_GiveToTarget("CalebDMTaunt1",1)
			Goto XDeath	
		Disintegrate:
			"####" "#" 0 A_UnsetSolid
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 0 A_PlayerScream
			"####" "#" 0 A_Stop
			"####" "#" 3 A_SpawnItem("DisintEffectSmall",0,10)
			"####" "#" 3 A_SetTranslucent(0.9,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 3 A_SetTranslucent(0.8,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 3 A_SetTranslucent(0.7,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 3 A_SetTranslucent(0.6,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 3 A_SetTranslucent(0.5,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 2 A_SetTranslucent(0.4,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 2 A_SetTranslucent(0.3,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 2 A_SetTranslucent(0.2,0)
			"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
			"####" "#" 2 A_SetTranslucent(0.1,0)
			TNT1 A -1
			Stop
		Death.EradExplosive:
		Death.EradNova:
		Death.EradShock:
		Death.EradExplosive2:	
			"####" A 0 A_JumpIfHealthLower(-5,"XDeathForCatBitch")
		Death.EradDisc:
		Death.EradPiercingDart:
		Death.EradGreenFire:
		Death.EradCoopGreenFire:
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_GiveToTarget("EleenaDMTaunt1", 1)
			Goto Death
		XDeathForCatBitch:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(96,"XDeath")
			"####" A 0 A_GiveToTarget("EleenaGibTaunt",1)
			Goto XDeath		
		Death.Nuke:
			"####" "#" 0 A_ChangeFlag("SOLID", 0)
			"####" "#" 0 A_PlayerScream
			"####" "#" 0 A_UnsetSolid		
			"####" "#" 0 A_SpawnItem("WTNukeDeathSmall")
			"####" "#" 0 A_Stop
			"####" "#################" 3 A_Fadeout(0.05)
			TNT1 A -1
			Stop
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:	
			"####" A 0 A_JumpIfHealthLower(-20,"XDeath")
			goto Death
		Death.SWFist:
			"####" A 0 A_GiveToTarget("SWLoWangBloody", 1)
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_SpawnItemEx("SWFisted")
			"####" A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death	
		Death.SWKatana:
			"####" A 0 A_GiveToTarget("SWLoWangBloody", 1)
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_SpawnItemEx("SWKatanad")
			"####" A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death	
		Death.SWShuriken:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_SpawnItemEx("SWShurikend")
			"####" A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death
		Death.SWSticky:
			Death.SWStickyCoop:	
		Death.SWGrenade:
		Death.SWNuke:
		Death.SWRocket:
		Death.SWRailgun:
		Death.SWRailgunCoop:
		Death.SWNukeCoop:
		Death.SWFlame:
		Death.SWFlame2:
		Death.SWFlame2Coop:
		Death.SWFlame3:	
			"####" A 0 A_JumpIfHealthLower(-3,"XDeathForWang")
		Death.SWBullet:	  
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death
		XDeathForWang:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(218, "XDeath")	
			"####" A 0 A_GiveToTarget("LoWangDMTaunt2",1)
			goto XDeath
		Death.PSRAPower:
		Death.PSRAPowerCoop:
		Death.PSExplosive:
		Death.PSExplosiveCoop:
			"####" A 0 A_JumpIfHealthLower(-30, "XDeathForJon")
		Death.PSBullet:
		Death.PSFire:	
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_GiveToTarget("JonDMTaunt1", 1)
			Goto Death
		Death.PSFire:
			"####" A 0 A_GiveToTarget("JonDMTaunt1", 1)
			Goto Burn
		XDeathForJon:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(96,"XDeath")
			"####" A 0 A_GiveToTarget("JonDMTaunt1",1)
			Goto XDeath		
		Death.LeonardDamage2:
		Death.LeonardDamage3:
			"####" A 0 A_JumpIfHealthLower(-20, "XDeathForLeonard")
		Death.LeonardDamage0:
		Death.LeonardDamage1:	
			"####" A 0 A_Jump(218, "Death")
			"####" A 0 A_GiveToTarget("LeonardDMTaunt1", 1)
			Goto Death
		XDeathForLeonard:
			"####" A 0 A_UnsetSolid
			"####" A 0 A_Jump(96,"XDeath")
			"####" A 0 A_GiveToTarget("LeonardGibTaunt",1)
			Goto XDeath
		Death.BittermanDamage:
			"####" A 0 A_JumpIfHealthLower(-50, "Xdeath")
			goto Death	
    }
}

Actor ChexWarrior_Shrink : ChexWarrior
{
	Player.ForwardMove 0.25
	Player.SideMove 0.25
	Player.MorphWeapon "ShrunkWeapon"
	Player.ViewHeight 8
	DamageFactor "ZorchPistol", 0.0
	DamageFactor "Zorch", 0.0
	DamageFactor "ZorchKamikaze", 0.0
	DamageFactor "PhasingZorch", 0.0
	DamageFactor "ZorchSpectral", 0.0
	MaxStepHeight 2
	Height 8
	Radius 4
	-SOLID
	+NOPAIN
	States
	{
		Death.PhosFireCoop:
		Death.HexGreenFire:
		Death.QuakeFire:
		Death.FireExplosive:
		Death.PGFire:
		Death.WTRangedFire:
		Death.WolfenFlamethrower:	  
		Death.MarathonPlasma:
		Burn:
		Death.TotenkopfFire:
		Death.DukeDamage:
		Death.DukePistol:
		Death.MightyBoot:
		Death.DukeExplosive:
		Death.DukeIce:
		Ice:
		Death.HexenIce:
		Death.Ice:
		Death.ExpanderDMG:
		XDeath.ExpanderDMG:
		Death.ExpanderDMGCoop:
		XDeath.ExpanderDMGCoop:
		Death.QuakeElectric:
		Death.NotQuadded:
		Death.QuakeExplosive:
		XDeath.QuakeElectric:
		XDeath.NotQuadded:
		XDeath.QuakeExplosive:
		Death.RottExplosive:
		Death.RottFire:
		Death.RottDisintegrate:
		Death.CalebFire:
		Death.LifeLeech:
		Death.CalebNapalm:
		Death.Vodoo:
		Death.VoodooPuff:
		Death.DynamiteCoop:
		Death.Dynamite:
		Death.Shock:  
		Death.Tesla:
		Death.CalebBullet:
		Disintegrate:
		Death.EradExplosive:
		Death.EradNova:
		Death.EradShock:
		Death.EradExplosive2:
		Death.EradDisc:
		Death.EradPiercingDart:
		Death.EradGreenFire:
		Death.EradCoopGreenFire:
		Death.Nuke:
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:
		Death.HLEgon:
		Death.FreemanGibs:
		Death.SWFist:
		Death.SWKatana:
		Death.SWShuriken:
		Death.SWSticky:
		Death.SWStickyCoop:
		Death.SWGrenade:
		Death.SWNuke:
		Death.SWRocket:
		Death.SWRailgun:
		Death.SWRailgunCoop:
		Death.SWNukeCoop:
		Death.SWFlame:
		Death.SWFlame2:
		Death.SWFlame2Coop:
		Death.SWFlame3:	
		Death.SWBullet:
		Death.PSRAPower:
		Death.PSRAPowerCoop:
		Death.PSExplosive:
		Death.PSExplosiveCoop:
		Death.PSBullet:
		Death.PSFire:
		Death.PSFire:
		Death.LeonardDamage2:
		Death.LeonardDamage3:
		Death.LeonardDamage0:
		Death.LeonardDamage1:	
		Death.BittermanDamage:
		Death.Hexen2Damage:
		Death.Hexen2Fire:
		Death.Hexen2Electric:
		Death.Hexen2Extreme:
		Death.Hexen2ElectricExtreme:
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A -1
			stop
		Death.DukeSquish:
		XDeath.DukeSquish:
			TNT1 A 0 A_GiveToTarget("DukeStomp", 1)
			TNT1 A 0 SetPlayerProperty(0,1,PROP_TOTALLYFROZEN)
			CHEX G 15
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 SetPlayerProperty(0,0,PROP_TOTALLYFROZEN)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A -1
			stop
	}
}

actor ChexWarrior_ShrinkEffect : ChexWarrior
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			CHEX G 0
			CHEX G 0 A_SetUserVar("user_scalex", scalex*65536.0)
			CHEX G 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}

actor ChexClass : inventory { -INVBAR +INVENTORY.UNDROPPABLE inventory.maxamount 1 }

actor ChexPuff : BulletPuff
{
    +PUFFONACTORS
    +BLOODLESSIMPACT
    +CLIENTSIDEONLY
	+THRUGHOST
    DamageType "Zorch"
    RenderStyle Add
    Alpha 0.4
    Scale 0.22
    VSpeed 0
    States
    {
      Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("Switchable_FlyingBlood_NonViolent",0,0,0,random(-350,350)/100.00,random(-350,350)/100.00,random(500,1000)/100.00,random(-180,180),33)
	  Crash:
        CMIS DCB 4 bright
        stop
    }
}

Actor ChexPuffCoop : ChexPuff { +MTHRUSPECIES +THRUSPECIES Species "Player" }

actor ChexBullet : FastProjectile
{
    Damage (Random(1,3)*5)
    Radius 1
    Height 1
    Speed 320
    Projectile
    Renderstyle "Normal"
    Species "Player"
    DamageType "Zorch"
    -BLOODSPLATTER
    +BLOODLESSIMPACT
    +THRUSPECIES
    +NOTIMEFREEZE
	+THRUGHOST
    Alpha 1.0
    States
    {
      Spawn:
        TNT1 A 1
        loop

      Death:
        TNT1 A 1 A_SpawnItem("ChexPuff")
        stop
    }
}

actor ChexUnsolid: Trigger
{
    States
    {
      Pickup:
        TNT1 A 0 A_UnsetSolid
        stop
    }
}

actor ChexSolid: Trigger
{
    States
    {
      Pickup:
        TNT1 A 0 A_SetSolid
        stop
    }
}

// XDeath Stuff

ACTOR Chexbit1 // Borrowed from DemonSteele's Steel Beast code
{
   Radius 2
   Height 2
   BounceFactor 0.55
   BounceCount 5
   Mass 10
   Speed 8
   +DOOMBOUNCE
   PROJECTILE
   +NOTELEPORT
   -NOGRAVITY
   -SOLID
   -SKYEXPLODE
   +NOBLOCKMAP
   +MOVEWITHSECTOR
   +CLIENTSIDEONLY
   States
   {
      Spawn:
       CERE ABCD 5
        loop
      Death:
       TNT1 A 0 A_Jump(256,"Death1","Death2")
      Death1:
       CERE A -1
        stop
      Death2:
       CERE C -1
        stop
   }
}

ACTOR Chexbit2 : Chexbit1
{
   States
   {
      Spawn:
       CERE EFGH 5
        loop
      Death:
       TNT1 A 0 A_Jump(256,"Death1","Death2")
      Death1:
       CERE E -1
        stop
      Death2:
       CERE G -1
        stop
   }
}

ACTOR Chexbit3 : Chexbit1
{
   States
   {
      Spawn:
       CERE IJKL 5
        loop
      Death:
       TNT1 A 0 A_Jump(256,"Death1","Death2")
      Death1:
       CERE I -1
        stop
      Death2:
       CERE K -1
        stop
   }
}

ACTOR Chexbit4 : Chexbit1
{
   States
   {
      Spawn:
       CERE MNOP 5
        loop
      Death:
       TNT1 A 0 A_Jump(256,"Death1","Death2")
      Death1:
       CERE M -1
        stop
      Death2:
       CERE O -1
        stop
   }
}

ACTOR Chexcrumb
{
   Radius 2
   Height 2
   Mass 10
   Speed 18
   Scale 0.75
   Gravity 0.75
   PROJECTILE
   +NOTELEPORT
   -NOGRAVITY
   -SOLID
   -SKYEXPLODE
   +NOBLOCKMAP
   +MOVEWITHSECTOR
   +CLIENTSIDEONLY
   States
   {
      Spawn:
       TNT1 A 0 
       TNT1 A 10 A_Jump(256,"Crumb1","Crumb2","Crumb3")
        loop
      Crumb1:
       CERE Q 10
        loop
      Crumb2:
       CERE R 10
        loop
      Crumb3:
       CERE S 10
        loop
      Death:
       TNT1 A 1
        stop
   }
}

// Unique Chex Blood - Family Friendly!
// Code taken from Reelism which was adapted from Psychic
// so... thanks Xaser!

ACTOR ChexBlood
{
	Mass 1
	Radius 1
	Height 1
	Scale 0.5
	Alpha 1
	Gravity .5
	+NOBLOCKMAP
	+FLOORCLIP
	+NOTELEPORT
	+CLIENTSIDEONLY
	+DONTTRANSLATE
	+CORPSE
	speed .1
	VSpeed 64
	States
	{
	Spawn:
		CERE AB 2
		CERE C 2 A_SpawnDebris("ChexBloodSpurt",1)
		CERE D 2 
	Live:
		CERE ABCDEFGH 2
		loop
	Crash:
		CERE A 0
		stop
	}
}

ACTOR ChexBloodSpurt
{
	Health 4
	radius 3
	height 6
	speed .1
	Scale .75
	Mass 0
	BounceType Doom
	+FLOORCLIP
	+DONTSPLASH
	+NOTELEPORT
	+NOBLOCKMAP
	+CLIENTSIDEONLY
	States
	{
	Spawn:
		SPRY A 0
		CERE QRSQRSQRSQRS 1
		CERE Q 1 A_SetTranslucent(.8)
		CERE R 1 A_SetTranslucent(.6)
		CERE S 1 A_SetTranslucent(.4)
		CERE Q 1 A_SetTranslucent(.2)
		Stop
	}
}