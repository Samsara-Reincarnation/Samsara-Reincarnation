Actor "Disruptor Fist" : Weapon
{
  Weapon.SelectionOrder 3500
  Weapon.Kickback 100
  Weapon.SlotNumber 0
  weapon.BobStyle normal
  weapon.BobRangeX 1.2
  weapon.BobRangeY 0.5
  weapon.BobSpeed 2.0  
  +WEAPON.MELEEWEAPON
  +WEAPON.NOALERT
  +INVENTORY.UNDROPPABLE
  +WEAPON.WIMPY_WEAPON
  Obituary "%k's gun was too hard for %o's head."
  Inventory.RestrictedTo "DisruptorPlayer"
  Tag "Pistol Whip"
  States
  {
  Ready:
    SQ95 A 1 A_WeaponReady
    Loop
  Deselect:
	TNT1 A 0 A_Lower
    SQ95 A 1 A_Lower
	Loop
  Select:
	TNT1 A 0 A_TakeInventory("DisruptorMode", 1)
	TNT1 A 0 A_Raise
    SQ95 A 1 A_Raise
    Loop
  Fire:
    TNT1 A 0 A_Playsound("Disruptor/Gun",CHAN_WEAPON)
    SQ95 AB 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_CustomPunch(random(3,9)*3,1,0,"DisruptorPuff2")
    Goto FireEnd
    TNT1 A 0 A_CustomPunch(random(3,9)*3,1,0,"DisruptorPuff2Coop")
    Goto FireEnd
  FireEnd:
    SQ95 C 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    SQ95 DE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ95 EDCBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_ReFire
    SQ95 A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  }
}

Actor DisruptorPuff2 : DisruptorPuff
{
	AttackSound "Disruptor/Crash"
	states
	{
	Crash:
		SQ96 TUVWXYZ 4 Bright
		SQ97 ABC 4 Bright
		SQ97 DEF 4 bright
		Stop
	Melee:
		TNT1 A 1 A_PlaySound("Disruptor/Crash")
		Stop
	}
}

Actor DisruptorPuff2Coop : DisruptorPuff2 { Species "Player" +THRUSPECIES +MTHRUSPECIES }