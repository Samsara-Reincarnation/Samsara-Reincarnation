Actor " 18mm Semi " : Weapon
{
  weapon.selectionorder 3300
  weapon.kickback 100
  weapon.BobStyle normal
  weapon.BobRangeX 1.2
  weapon.BobRangeY 0.5
  weapon.BobSpeed 2.0
  Weapon.AmmoUse 0
  Weapon.AmmoGive 0
  Weapon.AmmoType ""
  Weapon.SlotNumber 1  
  +Inventory.Undroppable
  +WEAPON.WIMPY_WEAPON
  Inventory.RestrictedTo "DisruptorPlayer"  
  states
  {
  Ready:
    SQ96 A 1 A_WeaponReady
    loop
  Deselect:
	TNT1 A 0 A_Lower
    SQ96 A 1 A_Lower  
    loop
  Select:
	TNT1 A 0 A_TakeInventory("DisruptorMode", 1)
	TNT1 A 0 A_Raise
    SQ96 A 1 A_Raise  
    loop
  Fire:
    TNT1 A 0 A_JumpIfInventory("PistolModeOn",1,"CheckAmmo")
  Fire2:  
	SQ96 BBB 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_PlaySound("Disruptor/Pistol",CHAN_WEAPON)
	SQ96 B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GunFlash
    SQ96 CC 1 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2) 
	TNT1 A 0 A_FireBullets(2,1,0,8,"DisruptorPuff", FBF_NORANDOM)
	Goto A
	TNT1 A 0 A_FireCustomMissile("DisruptorBullet",fRandom(2,-2),0,0,0,0,Random(-2,2))	
  A:	
    SQ96 BBBBB 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ96 AAA 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Flash:
	TNT1 A 0 A_Light2
	SQ96 D 3 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Light0
	Goto Lightdone
  CheckAmmo:
	SQ96 A 0 A_JumpIfInventory("Clip",1,2)
	SQ96 A 0 A_SelectWeapon("Disruptor Fist")
	Goto Deselect
	SQ69 A 0 A_TakeInventory("Clip",1)
	goto Fire2	
  Spawn:
	TNT1 A -1
	Stop
  }
}

Actor DisruptorBullet : FastProjectile
{
	Speed 320
	Radius 1
	Height 1
	Projectile
	Species "Player"
	Damage (8)
	+THRUSPECIES
	+BLOODSPLATTER
	+NOTIMEFREEZE
	+NOEXTREMEDEATH
	DamageType "DisruptorUniversalDamageShit1"
	states
	{
	Spawn:
		TNT1 A 1
		Loop
	Crash:	
		TNT1 A 1 A_SpawnItemEx("DisruptorSparkPuff")//,0,0,0,0,0,0,0,128,0) this makes puff apprear on bleeding actors....
		Stop
	Death:
		TNT1 A 1 A_SpawnItemEx("DisruptorPuff",0,0,0,0,0,1,0,0)//,0,0,0,0,0,0,0,128,0) this makes puff apprear on bleeding actors....
		Stop
	XDeath:
		TNT1 A 1
		Stop
	}
}

Actor "DisruptorPuff" : BulletPuff	
{  
  +NOBLOCKMAP
  +NOGRAVITY
  +ALLOWPARTICLES
  +RANDOMIZE
  -SKYEXPLODE  
  +NOEXTREMEDEATH
  Scale 0.5
  Renderstyle Add
  Alpha 1.0
  States
  {
  Spawn:
  Crash:
    SQ96 EFGHIJKLMNOPQRS 4 Bright
	Stop
  Melee:
	TNT1 A 1 
	Stop
  }
} 

Actor "DisruptorSparkPuff"	
{  
  +NOBLOCKMAP
  +NOGRAVITY
  +ALLOWPARTICLES
  +RANDOMIZE
  -SKYEXPLODE  
  +NOEXTREMEDEATH
  Scale 0.5
  Renderstyle Add
  Alpha 1.0
  VSpeed 0
  States
  {
  Spawn:
    SQ95 GHIJKLMNOPQRSTU 1 Bright
	Stop
  }
} 
