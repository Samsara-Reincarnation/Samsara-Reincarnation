Actor " 18mm Auto " : Weapon
{
    Weapon.SelectionOrder 1100
    Weapon.SlotNumber 1
    Weapon.SlotPriority 1	
	weapon.BobStyle normal
	weapon.BobRangeX 1.2
	weapon.BobRangeY 0.5
	weapon.BobSpeed 2.0	
	Weapon.AmmoUse 0
	Weapon.AmmoGive 10
	Weapon.AmmoType "Clip"
    Decal BulletChip
    Inventory.PickupMessage "You upgraded your 18mm semi!"
    Obituary "%k killed %o with an auto-pistol."
    Inventory.RestrictedTo "DisruptorPlayer"	
    States
	{
	Ready:
		SQ69 K 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_Lower
		SQ69 K 1 A_Lower
		Loop
	Select:
		TNT1 A 0 A_TakeInventory("DisruptorMode", 1)
		TNT1 A 0 A_Raise
		SQ69 K 1 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("PistolModeOn",1,"CheckAmmo")
	Fire2:  	
		TNT1 A 0 A_GunFlash	
		TNT1 A 0 A_PlaySound("Disruptor/Pistol",CHAN_WEAPON)
		SQ69 L 1 bright 
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
		TNT1 A 0 A_FireBullets(2,1.5,1,8,"DisruptorPuff", FBF_NORANDOM)
		Goto A
		TNT1 A 0 A_FireCustomMissile("DisruptorBullet2",frandom(-2.00,2.00),1,0,0,0,frandom(1.00,-1.00))				
	A:	
		SQ69 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SQ69 JJ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_Refire
		SQ69 KK 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto Ready
	Flash:
		TNT1 A 0 A_Jump(256,"Style1","Style2")
		Goto FlashContinue
	Style1:
		TNT1 A 0 A_Light2
		SQ69 M 2 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto FlashContinue
	Style2:
		TNT1 A 0 A_Light2
		SQ69 N 2 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto FlashContinue		
	FlashContinue:
		TNT1 A 0 A_Light0
		Goto LightDone
	CheckAmmo:
		SQ96 A 0 A_JumpIfInventory("Clip",1,2)
		SQ96 A 0 A_SelectWeapon("Disruptor Fist")
		Goto Deselect
		SQ69 A 0 A_TakeInventory("Clip",1)
		goto Fire2			
	Spawn:
		SQ72 Q -1
		Stop
	}
}	

Actor DisruptorBullet2 : DisruptorBullet { Damage (8) }